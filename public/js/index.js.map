{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/modules/schedule.mjs","src/js/modules/search.mjs","src/js/modules/utils.mjs","src/js/web-components/urgent-announcement.mjs"],"names":[],"mappings":"AAAA;;;;;ACAA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,EAA/B,CAAkC,WAAlC,EAAb,C,CAGA;;AACA,IAAI,IAAI,KAAK,WAAb,EAA0B;AACtB;AACH,C,CAGD;;;AACA,IAAM,MAAM,GAAG,EAAE,EAAjB,C,CAEA;;AACA,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,IAApB,E,CAEA;;AACA,MAAM,CAAC,EAAP,CAAU,qBAAV,EAAiC,UAAA,YAAY,EAAI;AAC7C,MAAM,kBAAkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,qBAAvB,CAA3B;;AAEA,MAAI,KAAK,CAAC,MAAN,CAAa,CAAC,kBAAD,CAAb,CAAJ,EAAwC;AACpC,IAAA,kBAAkB,CAAC,YAAnB,CAAgC,SAAhC,EAA2C,YAAY,CAAC,KAAxD;AACA,IAAA,kBAAkB,CAAC,YAAnB,CAAgC,KAAhC,EAAuC,YAAY,CAAC,UAApD;AACH;AACJ,CAPD,E,CAYA;;AACA,IAAM,QAAQ,GAAG,QAAQ,CAAC,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAb;;AAEA,IAAI,KAAK,CAAC,MAAN,CAAa,CAAC,QAAD,EAAW,IAAX,CAAb,CAAJ,EAAoC;AAEhC;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACrC,IAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,MAAtB;AACH,GAFD;AAGH,C,CAKD;;;AACA,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAM,eAAe,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAxB;AACA,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,sCAAvB,CAAnB;;AAEA,IAAI,KAAK,CAAC,MAAN,CAAa,CAAC,SAAD,EAAY,eAAZ,EAA6B,UAA7B,CAAb,CAAJ,EAA4D;AAExD;AACA,EAAA,SAAS,CAAC,gBAAV,CAA2B,OAA3B,EAAoC;AAAA,WAAM,MAAM,CAAC,SAAP,EAAN;AAAA,GAApC;AACA,EAAA,SAAS,CAAC,gBAAV,CAA2B,MAA3B,EAAmC;AAAA,WAAM,MAAM,CAAC,SAAP,EAAN;AAAA,GAAnC,EAJwD,CAOxD;;AACA,EAAA,eAAe,CAAC,gBAAhB,CAAiC,OAAjC,EAA0C,UAAA,CAAC;AAAA,WAAI,MAAM,CAAC,KAAP,CAAa,CAAb,CAAJ;AAAA,GAA3C,EARwD,CAWxD;;AACA,EAAA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,UAAA,CAAC,EAAI;AACtC,QAAI,SAAS,CAAC,KAAV,KAAoB,EAAxB,EAA4B;AACxB,MAAA,MAAM,CAAC,KAAP,CAAa,CAAb;AACH;AACJ,GAJD,EAZwD,CAmBxD;;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,UAA1B,EAAsC,UAAA,CAAC,EAAI;AACvC,YAAQ,CAAC,CAAC,GAAV;AACI,WAAK,GAAL;AACI,QAAA,MAAM,CAAC,KAAP,CAAa,CAAb,EADJ,CACoB;;AAChB;AAHR;AAKH,GAND;AAOH;;;;;;;;;AChFD,IAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAT,CAAuB,sBAAvB,CAA1B;AACA,IAAM,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,iBAAvB,CAApB;AACA,IAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAT,CAAuB,8BAAvB,CAAzB;AACA,IAAM,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,6BAAvB,CAArB;;AAEe,SAAS,eAAT,GAA2B;AACtC,MAAI,aAAa,GAAG,CAApB;AACA,EAAA,YAAY,CAAC,aAAD,CAAZ;AAEA,EAAA,gBAAgB,CAAC,gBAAjB,CAAkC,OAAlC,EAA2C,YAAM;AAC7C,IAAA,aAAa;AACb,IAAA,YAAY,CAAC,aAAD,CAAZ;AACA,IAAA,eAAe,CAAC,aAAD,CAAf;AACH,GAJD;AAMA,EAAA,YAAY,CAAC,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AACzC,IAAA,aAAa;AACb,IAAA,YAAY,CAAC,aAAD,CAAZ;AACA,IAAA,eAAe,CAAC,aAAD,CAAf;AACH,GAJD;AAKH,C,CAGD;;;AACA,SAAS,eAAT,CAAyB,aAAzB,EAAwC;AACpC,EAAA,YAAY,GACP,IADL,CACU,UAAA,SAAS,EAAI;AACf,QAAM,QAAQ,GAAG,SAAS,CAAC,aAAD,CAA1B;AACA,QAAM,IAAI,GAAG,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,UAAA,QAAQ;AAAA,aAAI,kBAAkB,CAAC,QAAD,CAAtB;AAAA,KAA/B,CAAb;AAEA,IAAA,WAAW,CAAC,WAAZ,aAA6B,QAAQ,CAAC,GAAtC,cAA6C,QAAQ,CAAC,KAAtD,cAA+D,QAAQ,CAAC,IAAxE;AAEA,IAAA,iBAAiB,CAAC,WAAlB,GAAgC,EAAhC;AACA,IAAA,IAAI,CAAC,OAAL,CAAa,UAAA,GAAG;AAAA,aAAI,iBAAiB,CAAC,MAAlB,CAAyB,GAAzB,CAAJ;AAAA,KAAhB;AACH,GATL;AAUH;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAA6B;AACzB,EAAA,KAAK,KAAK,CAAV,GAAc,gBAAgB,CAAC,SAAjB,CAA2B,GAA3B,CAA+B,UAA/B,CAAd,GAA2D,gBAAgB,CAAC,SAAjB,CAA2B,MAA3B,CAAkC,UAAlC,CAA3D;AACA,EAAA,KAAK,KAAK,CAAV,GAAc,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,UAA3B,CAAd,GAAuD,YAAY,CAAC,SAAb,CAAuB,MAAvB,CAA8B,UAA9B,CAAvD;AACH;;AAED,SAAS,kBAAT,CAA4B,QAA5B,EAAsC;AAClC,MAAM,aAAa,aAAM,QAAQ,CAAC,aAAT,CAAuB,IAA7B,gBAAuC,QAAQ,CAAC,WAAT,CAAqB,IAA5D,CAAnB;AACA,MAAM,mBAAmB,GAAG,QAAQ,CAAC,MAAT,CAAgB,OAAhB,CAAwB,CAAxB,EAA2B,KAAvD;AACA,MAAM,gBAAgB,GAAG,QAAQ,CAAC,MAAT,CAAgB,SAAhB,CAA0B,CAA1B,EAA6B,KAAtD;AAEA,MAAI,aAAJ;AACA,EAAA,QAAQ,CAAC,SAAT,GAAqB,aAAa,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAyB,CAAzB,EAA4B,YAAjE,GAAgF,aAAa,GAAG,SAAhG;AAEA,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAb;AACA,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAnB;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAb;AACA,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAhB;AAEA,EAAA,IAAI,CAAC,WAAL,GAAmB,aAAnB;AACA,EAAA,UAAU,CAAC,WAAX,GAAyB,mBAAzB;AACA,EAAA,IAAI,CAAC,WAAL,GAAmB,aAAnB;AACA,EAAA,OAAO,CAAC,WAAR,GAAsB,gBAAtB;AAEA,EAAA,GAAG,CAAC,MAAJ,CAAW,IAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,UAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,IAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,OAAX;AAEA,EAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,iBAAlB;AAEA,SAAO,GAAP;AACH;;AAED,IAAM,OAAO,GAAG;AACZ,EAAA,MAAM,EAAE,KADI;AAEZ,EAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAFG,CAAhB,C,CAOA;;AACA,SAAS,YAAT,GAAwB;AACpB,SAAO,KAAK,CAAC,WAAD,EAAc,OAAd,CAAL,CACF,IADE,CACG,UAAA,GAAG;AAAA,WAAI,GAAG,CAAC,IAAJ,EAAJ;AAAA,GADN,CAAP;AAEH;;;;;;;;;;;;AClFD,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAM,eAAe,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAxB;;AAEO,SAAS,KAAT,CAAe,CAAf,EAAkB;AACrB,EAAA,CAAC,CAAC,cAAF;AACA,EAAA,SAAS,CAAC,KAAV;AACH;;AAEM,SAAS,SAAT,GAAqB;AACxB,EAAA,eAAe,CAAC,SAAhB,CAA0B,MAA1B,CAAiC,MAAjC;AACH;;AAEM,SAAS,SAAT,GAAqB;AACxB,MAAI,SAAS,CAAC,KAAV,KAAoB,EAAxB,EAA4B;AACxB,IAAA,eAAe,CAAC,SAAhB,CAA0B,GAA1B,CAA8B,MAA9B;AACH;AACJ;;AAEM,SAAS,KAAT,CAAe,CAAf,EAAkB;AACrB,EAAA,SAAS,CAAC,KAAV,GAAkB,EAAlB;AACA,EAAA,KAAK,CAAC,CAAD,CAAL;AACH;;;;;;;;;;;;;;;;;;;;;;;;;ACrBM,SAAS,MAAT,OAAgC;AAAA;AAAA,MAAZ,SAAY;;AACnC,MAAM,MAAM,GAAG,SAAS,CAAC,KAAV,CAAgB,UAAA,QAAQ;AAAA,WAAI,QAAQ,IAAI,IAAhB;AAAA,GAAxB,CAAf;AACA,SAAO,MAAP;AACH;;AAGM,SAAS,eAAT,CAAyB,IAAzB,EAA+B,IAA/B,EAAqC;AACxC,EAAA,YAAY,CAAC,OAAb,CAAqB,IAArB,EAA2B,IAAI,CAAC,SAAL,CAAe,IAAf,CAA3B;AACH;;AAGM,SAAS,eAAT,CAAyB,IAAzB,EAA+B;AAClC,SAAO,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,IAArB,CAAX,CAAP;AACH;;AAKM,SAAS,gBAAT,CAA0B,IAA1B,EAAgC;AAAE;AACrC,MAAI,OAAJ;;AACA,MAAI;AACA,IAAA,OAAO,GAAG,MAAM,CAAC,IAAD,CAAhB;AACA,QAAI,CAAC,GAAG,kBAAR;AACA,IAAA,OAAO,CAAC,OAAR,CAAgB,CAAhB,EAAmB,CAAnB;AACA,IAAA,OAAO,CAAC,UAAR,CAAmB,CAAnB;AACA,WAAO,IAAP;AACH,GAND,CAME,OAAO,CAAP,EAAU;AACR,WAAO,CAAC,YAAY,YAAb,KACC,CAAC,CAAC,IAAF,KAAW,EAAX,IACA,CAAC,CAAC,IAAF,KAAW,IADX,IAEA,CAAC,CAAC,IAAF,KAAW,oBAFX,IAGA,CAAC,CAAC,IAAF,KAAW,4BAJZ,KAKF,OAAO,IAAI,OAAO,CAAC,MAAR,KAAmB,CALnC;AAMH;AACJ;;;;;;;;;;AClCD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAjB;;AACA,QAAQ,CAAC,SAAT;;IAsCM,kB;;;;;AAEF,gCAAc;AAAA;;AAAA;;AACV;;AAEA,UAAK,YAAL,CAAkB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAlB;;AACA,UAAK,UAAL,CAAgB,WAAhB,CAA4B,QAAQ,CAAC,OAAT,CAAiB,SAAjB,CAA2B,IAA3B,CAA5B;;AACA,UAAK,UAAL,CAAgB,aAAhB,CAA8B,GAA9B,EAAmC,WAAnC,GAAiD,MAAK,YAAL,CAAkB,SAAlB,CAAjD;;AACA,UAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,gBAArC,CAAsD,OAAtD,EAA+D,YAAM;AACjE,YAAK,IAAL;;AACA,YAAK,KAAL;AACH,KAHD;;AANU;AAUb;;;;6CAMwB,I,EAAM,Q,EAAU,Q,EAAU;AAC/C,UAAI,QAAQ,IAAI,QAAZ,IAAwB,QAAQ,IAAI,EAAxC,EAA4C;AACxC,YAAM,GAAG,GAAG,KAAK,YAAL,CAAkB,KAAlB,CAAZ;AACA,YAAM,aAAa,GAAG,KAAK,CAAC,eAAN,CAAsB,cAAtB,CAAtB;;AACA,YAAI,aAAJ,EAAmB;AACf,cAAI,CAAC,aAAa,CAAC,QAAd,CAAuB,GAAvB,CAAL,EAAkC;AAC9B,iBAAK,aAAL;AACA,iBAAK,IAAL;AACH;AACJ,SALD,MAKO;AACH,eAAK,aAAL;AACA,eAAK,IAAL;AACH;AACJ;AACJ;;;oCAEe;AACZ,WAAK,UAAL,CAAgB,aAAhB,CAA8B,GAA9B,EAAmC,WAAnC,GAAiD,KAAK,YAAL,CAAkB,SAAlB,CAAjD;AACH;;;2BAEM;AACH,WAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,SAArC,CAA+C,MAA/C,CAAsD,MAAtD;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,SAA/B,CAAyC,GAAzC,CAA6C,mBAA7C;AACH;;;2BAEM;AACH,WAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,SAArC,CAA+C,GAA/C,CAAmD,MAAnD;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,SAA/B,CAAyC,MAAzC,CAAgD,mBAAhD;AACH;;;4BAEO;AACJ,UAAI,KAAK,CAAC,gBAAN,CAAuB,cAAvB,CAAJ,EAA4C;AACxC,YAAM,aAAa,GAAG,KAAK,CAAC,eAAN,CAAsB,cAAtB,CAAtB;AACA,YAAM,WAAW,GAAG,aAAa,GAAG,aAAH,GAAmB,EAApD;AAEA,QAAA,WAAW,CAAC,IAAZ,CAAiB,KAAK,YAAL,CAAkB,KAAlB,CAAjB;AACA,QAAA,KAAK,CAAC,eAAN,CAAsB,cAAtB,EAAsC,WAAtC;AACH;AACJ;;;wBA1C+B;AAC5B,aAAO,CAAC,KAAD,CAAP;AACH;;;;iCAhB4B,W;;AA2DjC,MAAM,CAAC,cAAP,CAAsB,MAAtB,CAA6B,qBAA7B,EAAoD,kBAApD","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as utils from './modules/utils.mjs'\nimport * as search from './modules/search.mjs'\nimport scheduleHandler from './modules/schedule.mjs'\nimport urgentAnnouncement from './web-components/urgent-announcement.mjs'\n\nconst page = document.querySelector('main').id.toLowerCase()\n\n\n//init dashboard\nif (page === 'dashboard') {\n    scheduleHandler()\n}\n\n\n//urgent announcements\nconst socket = io()\n\n//subscribe to urgent-announcements\nsocket.emit('join', page)\n\n//on urgent-announcement hook update interface (see WC_urgentAnnouncement)\nsocket.on('urgent-announcement', announcement => {\n    const urgentAnnouncement = document.querySelector('urgent-announcement')\n\n    if (utils.exists([urgentAnnouncement])) {\n        urgentAnnouncement.setAttribute('message', announcement.title)\n        urgentAnnouncement.setAttribute('uid', announcement.newsItemId)\n    }\n})\n\n\n\n\n//menu \nconst menuIcon = document.getElementById('menu-icon')\nconst menu = document.getElementById('menu')\n\nif (utils.exists([menuIcon, menu])) {\n\n    //toggle menu (on mobile)\n    menuIcon.addEventListener('click', () => {\n        menu.classList.toggle('hide')\n    })\n}\n\n\n\n\n//search \nconst searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\nconst searchIcon = document.querySelector('#search-container input[type=submit]')\n\nif (utils.exists([searchBar, searchResetIcon, searchIcon])) {\n\n    //control search-reset icon \n    searchBar.addEventListener('focus', () => search.showReset())\n    searchBar.addEventListener('blur', () => search.hideReset())\n\n\n    //reset search input\n    searchResetIcon.addEventListener('click', e => search.reset(e))\n\n\n    //depending on search-query either give focus to searchbar or submit search-query\n    searchIcon.addEventListener('click', e => {\n        if (searchBar.value === \"\") {\n            search.focus(e)\n        }\n    })\n\n\n    //listen to keyboard input\n    document.addEventListener('keypress', e => {\n        switch (e.key) {\n            case \"/\":\n                search.focus(e) //give searchbar focus and hide search-reset icon\n                break\n        }\n    })\n}","const scheduleContainer = document.querySelector('#schedules-container')\nconst dateElement = document.querySelector('#navigator span')\nconst previousSchedule = document.querySelector('#navigator img:first-of-type')\nconst nextSchedule = document.querySelector('#navigator img:last-of-type')\n\nexport default function scheduleHandler() {\n    let scheduleIndex = 0\n    arrowHandler(scheduleIndex)\n\n    previousSchedule.addEventListener('click', () => {\n        scheduleIndex--\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n\n    nextSchedule.addEventListener('click', () => {\n        scheduleIndex++\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n}\n\n\n// Helpers\nfunction renderSchedules(scheduleIndex) {\n    getSchedules()\n        .then(schedules => {\n            const schedule = schedules[scheduleIndex]\n            const divs = schedule.schedules.map(schedule => createScheduleItem(schedule))\n\n            dateElement.textContent = `${schedule.day}-${schedule.month}-${schedule.year}`\n\n            scheduleContainer.textContent = ''\n            divs.forEach(div => scheduleContainer.append(div))\n        })\n}\n\nfunction arrowHandler(index) {\n    index === 0 ? previousSchedule.classList.add('disabled') : previousSchedule.classList.remove('disabled')\n    index === 4 ? nextSchedule.classList.add('disabled') : nextSchedule.classList.remove('disabled')\n}\n\nfunction createScheduleItem(schedule) {\n    const schedule_time = `${schedule.startDateTime.time} - ${schedule.endDateTime.time}`\n    const schedule_coursename = schedule._links.courses[0].title\n    const schedule_teacher = schedule._links.lecturers[0].title\n\n    let schedule_room\n    schedule._embedded ? schedule_room = schedule._embedded.rooms[0].abbreviation : schedule_room = 'No room'\n\n    const div = document.createElement('div')\n    const time = document.createElement('p')\n    const coursename = document.createElement('p')\n    const room = document.createElement('p')\n    const teacher = document.createElement('p')\n\n    time.textContent = schedule_time\n    coursename.textContent = schedule_coursename\n    room.textContent = schedule_room\n    teacher.textContent = schedule_teacher\n\n    div.append(time)\n    div.append(coursename)\n    div.append(room)\n    div.append(teacher)\n\n    div.classList.add('schedule-course')\n\n    return div\n}\n\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n}\n\n// Data\nfunction getSchedules() {\n    return fetch('/schedule', options)\n        .then(res => res.json())\n}","const searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\n\nexport function focus(e) {\n    e.preventDefault()\n    searchBar.focus()\n}\n\nexport function showReset() {\n    searchResetIcon.classList.remove('hide')\n}\n\nexport function hideReset() {\n    if (searchBar.value === \"\") {\n        searchResetIcon.classList.add('hide')\n    }\n}\n\nexport function reset(e) {\n    searchBar.value = \"\"\n    focus(e)\n}","export function exists([...variables]) {\n    const exists = variables.every(variable => variable != null)\n    return exists\n}\n\n\nexport function setLocalStorage(name, item) {\n    localStorage.setItem(name, JSON.stringify(item))\n}\n\n\nexport function getLocalStorage(item) {\n    return JSON.parse(localStorage.getItem(item))\n}\n\n\n\n\nexport function storageAvailable(type) { //source: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n    let storage\n    try {\n        storage = window[type]\n        let x = '__storage_test__'\n        storage.setItem(x, x)\n        storage.removeItem(x)\n        return true\n    } catch (e) {\n        return e instanceof DOMException && (\n                e.code === 22 ||\n                e.code === 1014 ||\n                e.name === 'QuotaExceededError' ||\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            (storage && storage.length !== 0)\n    }\n}","import * as utils from '../modules/utils.mjs'\n\nexport { template as WC_urgentAnnouncement }\n\nconst template = document.createElement('template')\ntemplate.innerHTML = `\n<style>\n    div {\n        display: grid;\n        grid-template-columns: 1fr 50px;\n        grid-template-rows: 50px;\n        align-items: center;\n        background-color: #ECE7FA;\n    }\n    div.hide {\n        position: absolute;\n        left: -9999px;\n    }\n    p {\n        margin: 0;\n        padding-left: 30px;\n        color: black;\n        justify-self: start;\n    }\n    @media only screen and (max-width: 425px) {\n        p {\n            padding-left: 10px;\n        }\n    }\n    img {\n        padding-right: 20px;\n        grid-column: 2 / 3;\n        justify-self: end;\n        cursor: pointer;\n    }\n</style>\n<div class=\"hide\">\n    <p></p>\n    <img src=\"./media/icons/notification-exit.svg\" alt=\"hide notification\">\n</div>`\n\n\n\nclass urgentAnnouncement extends HTMLElement {\n\n    constructor() {\n        super()\n\n        this.attachShadow({ mode: 'open' })\n        this.shadowRoot.appendChild(template.content.cloneNode(true))\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n        this.shadowRoot.querySelector('img').addEventListener('click', () => {\n            this.hide()\n            this.store()\n        })\n    }\n\n    static get observedAttributes() {\n        return ['uid']\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue != newValue && newValue != \"\") {\n            const uid = this.getAttribute('uid')\n            const storedHistory = utils.getLocalStorage('read-history')\n            if (storedHistory) {\n                if (!storedHistory.includes(uid)) {\n                    this.updateContent()\n                    this.show()\n                }\n            } else {\n                this.updateContent()\n                this.show()\n            }\n        }\n    }\n\n    updateContent() {\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n    }\n\n    show() {\n        this.shadowRoot.querySelector('div').classList.remove('hide')\n        document.querySelector('main').classList.add('showsNotification')\n    }\n\n    hide() {\n        this.shadowRoot.querySelector('div').classList.add('hide')\n        document.querySelector('main').classList.remove('showsNotification')\n    }\n\n    store() {\n        if (utils.storageAvailable('localStorage')) {\n            const storedHistory = utils.getLocalStorage('read-history')\n            const readHistory = storedHistory ? storedHistory : []\n\n            readHistory.push(this.getAttribute('uid'))\n            utils.setLocalStorage('read-history', readHistory)\n        }\n    }\n}\n\nwindow.customElements.define('urgent-announcement', urgentAnnouncement)"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvbW9kdWxlcy9zY2hlZHVsZS5tanMiLCJzcmMvanMvbW9kdWxlcy9zZWFyY2gubWpzIiwic3JjL2pzL21vZHVsZXMvdXRpbHMubWpzIiwic3JjL2pzL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLEVBQS9CLENBQWtDLFdBQWxDLEVBQWIsQyxDQUdBOztBQUNBLElBQUksSUFBSSxLQUFLLFdBQWIsRUFBMEI7QUFDdEI7QUFDSCxDLENBR0Q7OztBQUNBLElBQU0sTUFBTSxHQUFHLEVBQUUsRUFBakIsQyxDQUVBOztBQUNBLE1BQU0sQ0FBQyxJQUFQLENBQVksTUFBWixFQUFvQixJQUFwQixFLENBRUE7O0FBQ0EsTUFBTSxDQUFDLEVBQVAsQ0FBVSxxQkFBVixFQUFpQyxVQUFBLFlBQVksRUFBSTtBQUM3QyxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLHFCQUF2QixDQUEzQjs7QUFFQSxNQUFJLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBQyxrQkFBRCxDQUFiLENBQUosRUFBd0M7QUFDcEMsSUFBQSxrQkFBa0IsQ0FBQyxZQUFuQixDQUFnQyxTQUFoQyxFQUEyQyxZQUFZLENBQUMsS0FBeEQ7QUFDQSxJQUFBLGtCQUFrQixDQUFDLFlBQW5CLENBQWdDLEtBQWhDLEVBQXVDLFlBQVksQ0FBQyxVQUFwRDtBQUNIO0FBQ0osQ0FQRCxFLENBWUE7O0FBQ0EsSUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsV0FBeEIsQ0FBakI7QUFDQSxJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixNQUF4QixDQUFiOztBQUVBLElBQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLFFBQUQsRUFBVyxJQUFYLENBQWIsQ0FBSixFQUFvQztBQUVoQztBQUNBLEVBQUEsUUFBUSxDQUFDLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFlBQU07QUFDckMsSUFBQSxJQUFJLENBQUMsU0FBTCxDQUFlLE1BQWYsQ0FBc0IsTUFBdEI7QUFDSCxHQUZEO0FBR0gsQyxDQUtEOzs7QUFDQSxJQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixZQUF4QixDQUFsQjtBQUNBLElBQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLGNBQXhCLENBQXhCO0FBQ0EsSUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsc0NBQXZCLENBQW5COztBQUVBLElBQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLFNBQUQsRUFBWSxlQUFaLEVBQTZCLFVBQTdCLENBQWIsQ0FBSixFQUE0RDtBQUV4RDtBQUNBLEVBQUEsU0FBUyxDQUFDLGdCQUFWLENBQTJCLE9BQTNCLEVBQW9DO0FBQUEsV0FBTSxNQUFNLENBQUMsU0FBUCxFQUFOO0FBQUEsR0FBcEM7QUFDQSxFQUFBLFNBQVMsQ0FBQyxnQkFBVixDQUEyQixNQUEzQixFQUFtQztBQUFBLFdBQU0sTUFBTSxDQUFDLFNBQVAsRUFBTjtBQUFBLEdBQW5DLEVBSndELENBT3hEOztBQUNBLEVBQUEsZUFBZSxDQUFDLGdCQUFoQixDQUFpQyxPQUFqQyxFQUEwQyxVQUFBLENBQUM7QUFBQSxXQUFJLE1BQU0sQ0FBQyxLQUFQLENBQWEsQ0FBYixDQUFKO0FBQUEsR0FBM0MsRUFSd0QsQ0FXeEQ7O0FBQ0EsRUFBQSxVQUFVLENBQUMsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsVUFBQSxDQUFDLEVBQUk7QUFDdEMsUUFBSSxTQUFTLENBQUMsS0FBVixLQUFvQixFQUF4QixFQUE0QjtBQUN4QixNQUFBLE1BQU0sQ0FBQyxLQUFQLENBQWEsQ0FBYjtBQUNIO0FBQ0osR0FKRCxFQVp3RCxDQW1CeEQ7O0FBQ0EsRUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsVUFBMUIsRUFBc0MsVUFBQSxDQUFDLEVBQUk7QUFDdkMsWUFBUSxDQUFDLENBQUMsR0FBVjtBQUNJLFdBQUssR0FBTDtBQUNJLFFBQUEsTUFBTSxDQUFDLEtBQVAsQ0FBYSxDQUFiLEVBREosQ0FDb0I7O0FBQ2hCO0FBSFI7QUFLSCxHQU5EO0FBT0g7Ozs7Ozs7OztBQ2hGRCxJQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLHNCQUF2QixDQUExQjtBQUNBLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGlCQUF2QixDQUFwQjtBQUNBLElBQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsOEJBQXZCLENBQXpCO0FBQ0EsSUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsNkJBQXZCLENBQXJCOztBQUVlLFNBQVMsZUFBVCxHQUEyQjtBQUN0QyxNQUFJLGFBQWEsR0FBRyxDQUFwQjtBQUNBLEVBQUEsWUFBWSxDQUFDLGFBQUQsQ0FBWjtBQUVBLEVBQUEsZ0JBQWdCLENBQUMsZ0JBQWpCLENBQWtDLE9BQWxDLEVBQTJDLFlBQU07QUFDN0MsSUFBQSxhQUFhO0FBQ2IsSUFBQSxZQUFZLENBQUMsYUFBRCxDQUFaO0FBQ0EsSUFBQSxlQUFlLENBQUMsYUFBRCxDQUFmO0FBQ0gsR0FKRDtBQU1BLEVBQUEsWUFBWSxDQUFDLGdCQUFiLENBQThCLE9BQTlCLEVBQXVDLFlBQU07QUFDekMsSUFBQSxhQUFhO0FBQ2IsSUFBQSxZQUFZLENBQUMsYUFBRCxDQUFaO0FBQ0EsSUFBQSxlQUFlLENBQUMsYUFBRCxDQUFmO0FBQ0gsR0FKRDtBQUtILEMsQ0FHRDs7O0FBQ0EsU0FBUyxlQUFULENBQXlCLGFBQXpCLEVBQXdDO0FBQ3BDLEVBQUEsWUFBWSxHQUNQLElBREwsQ0FDVSxVQUFBLFNBQVMsRUFBSTtBQUNmLFFBQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxhQUFELENBQTFCO0FBQ0EsUUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFNBQVQsQ0FBbUIsR0FBbkIsQ0FBdUIsVUFBQSxRQUFRO0FBQUEsYUFBSSxrQkFBa0IsQ0FBQyxRQUFELENBQXRCO0FBQUEsS0FBL0IsQ0FBYjtBQUVBLElBQUEsV0FBVyxDQUFDLFdBQVosYUFBNkIsUUFBUSxDQUFDLEdBQXRDLGNBQTZDLFFBQVEsQ0FBQyxLQUF0RCxjQUErRCxRQUFRLENBQUMsSUFBeEU7QUFFQSxJQUFBLGlCQUFpQixDQUFDLFdBQWxCLEdBQWdDLEVBQWhDO0FBQ0EsSUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLFVBQUEsR0FBRztBQUFBLGFBQUksaUJBQWlCLENBQUMsTUFBbEIsQ0FBeUIsR0FBekIsQ0FBSjtBQUFBLEtBQWhCO0FBQ0gsR0FUTDtBQVVIOztBQUVELFNBQVMsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUN6QixFQUFBLEtBQUssS0FBSyxDQUFWLEdBQWMsZ0JBQWdCLENBQUMsU0FBakIsQ0FBMkIsR0FBM0IsQ0FBK0IsVUFBL0IsQ0FBZCxHQUEyRCxnQkFBZ0IsQ0FBQyxTQUFqQixDQUEyQixNQUEzQixDQUFrQyxVQUFsQyxDQUEzRDtBQUNBLEVBQUEsS0FBSyxLQUFLLENBQVYsR0FBYyxZQUFZLENBQUMsU0FBYixDQUF1QixHQUF2QixDQUEyQixVQUEzQixDQUFkLEdBQXVELFlBQVksQ0FBQyxTQUFiLENBQXVCLE1BQXZCLENBQThCLFVBQTlCLENBQXZEO0FBQ0g7O0FBRUQsU0FBUyxrQkFBVCxDQUE0QixRQUE1QixFQUFzQztBQUNsQyxNQUFNLGFBQWEsYUFBTSxRQUFRLENBQUMsYUFBVCxDQUF1QixJQUE3QixnQkFBdUMsUUFBUSxDQUFDLFdBQVQsQ0FBcUIsSUFBNUQsQ0FBbkI7QUFDQSxNQUFNLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxNQUFULENBQWdCLE9BQWhCLENBQXdCLENBQXhCLEVBQTJCLEtBQXZEO0FBQ0EsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsTUFBVCxDQUFnQixTQUFoQixDQUEwQixDQUExQixFQUE2QixLQUF0RDtBQUVBLE1BQUksYUFBSjtBQUNBLEVBQUEsUUFBUSxDQUFDLFNBQVQsR0FBcUIsYUFBYSxHQUFHLFFBQVEsQ0FBQyxTQUFULENBQW1CLEtBQW5CLENBQXlCLENBQXpCLEVBQTRCLFlBQWpFLEdBQWdGLGFBQWEsR0FBRyxTQUFoRztBQUVBLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBQVo7QUFDQSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFiO0FBQ0EsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBbkI7QUFDQSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFiO0FBQ0EsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBaEI7QUFFQSxFQUFBLElBQUksQ0FBQyxXQUFMLEdBQW1CLGFBQW5CO0FBQ0EsRUFBQSxVQUFVLENBQUMsV0FBWCxHQUF5QixtQkFBekI7QUFDQSxFQUFBLElBQUksQ0FBQyxXQUFMLEdBQW1CLGFBQW5CO0FBQ0EsRUFBQSxPQUFPLENBQUMsV0FBUixHQUFzQixnQkFBdEI7QUFFQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsSUFBWDtBQUNBLEVBQUEsR0FBRyxDQUFDLE1BQUosQ0FBVyxVQUFYO0FBQ0EsRUFBQSxHQUFHLENBQUMsTUFBSixDQUFXLElBQVg7QUFDQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsT0FBWDtBQUVBLEVBQUEsR0FBRyxDQUFDLFNBQUosQ0FBYyxHQUFkLENBQWtCLGlCQUFsQjtBQUVBLFNBQU8sR0FBUDtBQUNIOztBQUVELElBQU0sT0FBTyxHQUFHO0FBQ1osRUFBQSxNQUFNLEVBQUUsS0FESTtBQUVaLEVBQUEsT0FBTyxFQUFFO0FBQ0wsb0JBQWdCO0FBRFg7QUFGRyxDQUFoQixDLENBT0E7O0FBQ0EsU0FBUyxZQUFULEdBQXdCO0FBQ3BCLFNBQU8sS0FBSyxDQUFDLFdBQUQsRUFBYyxPQUFkLENBQUwsQ0FDRixJQURFLENBQ0csVUFBQSxHQUFHO0FBQUEsV0FBSSxHQUFHLENBQUMsSUFBSixFQUFKO0FBQUEsR0FETixDQUFQO0FBRUg7Ozs7Ozs7Ozs7OztBQ2xGRCxJQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixZQUF4QixDQUFsQjtBQUNBLElBQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLGNBQXhCLENBQXhCOztBQUVPLFNBQVMsS0FBVCxDQUFlLENBQWYsRUFBa0I7QUFDckIsRUFBQSxDQUFDLENBQUMsY0FBRjtBQUNBLEVBQUEsU0FBUyxDQUFDLEtBQVY7QUFDSDs7QUFFTSxTQUFTLFNBQVQsR0FBcUI7QUFDeEIsRUFBQSxlQUFlLENBQUMsU0FBaEIsQ0FBMEIsTUFBMUIsQ0FBaUMsTUFBakM7QUFDSDs7QUFFTSxTQUFTLFNBQVQsR0FBcUI7QUFDeEIsTUFBSSxTQUFTLENBQUMsS0FBVixLQUFvQixFQUF4QixFQUE0QjtBQUN4QixJQUFBLGVBQWUsQ0FBQyxTQUFoQixDQUEwQixHQUExQixDQUE4QixNQUE5QjtBQUNIO0FBQ0o7O0FBRU0sU0FBUyxLQUFULENBQWUsQ0FBZixFQUFrQjtBQUNyQixFQUFBLFNBQVMsQ0FBQyxLQUFWLEdBQWtCLEVBQWxCO0FBQ0EsRUFBQSxLQUFLLENBQUMsQ0FBRCxDQUFMO0FBQ0g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyQk0sU0FBUyxNQUFULE9BQWdDO0FBQUE7QUFBQSxNQUFaLFNBQVk7O0FBQ25DLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFWLENBQWdCLFVBQUEsUUFBUTtBQUFBLFdBQUksUUFBUSxJQUFJLElBQWhCO0FBQUEsR0FBeEIsQ0FBZjtBQUNBLFNBQU8sTUFBUDtBQUNIOztBQUdNLFNBQVMsZUFBVCxDQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQztBQUN4QyxFQUFBLFlBQVksQ0FBQyxPQUFiLENBQXFCLElBQXJCLEVBQTJCLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBZixDQUEzQjtBQUNIOztBQUdNLFNBQVMsZUFBVCxDQUF5QixJQUF6QixFQUErQjtBQUNsQyxTQUFPLElBQUksQ0FBQyxLQUFMLENBQVcsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsSUFBckIsQ0FBWCxDQUFQO0FBQ0g7O0FBS00sU0FBUyxnQkFBVCxDQUEwQixJQUExQixFQUFnQztBQUFFO0FBQ3JDLE1BQUksT0FBSjs7QUFDQSxNQUFJO0FBQ0EsSUFBQSxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUQsQ0FBaEI7QUFDQSxRQUFJLENBQUMsR0FBRyxrQkFBUjtBQUNBLElBQUEsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkI7QUFDQSxJQUFBLE9BQU8sQ0FBQyxVQUFSLENBQW1CLENBQW5CO0FBQ0EsV0FBTyxJQUFQO0FBQ0gsR0FORCxDQU1FLE9BQU8sQ0FBUCxFQUFVO0FBQ1IsV0FBTyxDQUFDLFlBQVksWUFBYixLQUNDLENBQUMsQ0FBQyxJQUFGLEtBQVcsRUFBWCxJQUNBLENBQUMsQ0FBQyxJQUFGLEtBQVcsSUFEWCxJQUVBLENBQUMsQ0FBQyxJQUFGLEtBQVcsb0JBRlgsSUFHQSxDQUFDLENBQUMsSUFBRixLQUFXLDRCQUpaLEtBS0YsT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLENBTG5DO0FBTUg7QUFDSjs7Ozs7Ozs7OztBQ2xDRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQSxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixVQUF2QixDQUFqQjs7QUFDQSxRQUFRLENBQUMsU0FBVDs7SUFzQ00sa0I7Ozs7O0FBRUYsZ0NBQWM7QUFBQTs7QUFBQTs7QUFDVjs7QUFFQSxVQUFLLFlBQUwsQ0FBa0I7QUFBRSxNQUFBLElBQUksRUFBRTtBQUFSLEtBQWxCOztBQUNBLFVBQUssVUFBTCxDQUFnQixXQUFoQixDQUE0QixRQUFRLENBQUMsT0FBVCxDQUFpQixTQUFqQixDQUEyQixJQUEzQixDQUE1Qjs7QUFDQSxVQUFLLFVBQUwsQ0FBZ0IsYUFBaEIsQ0FBOEIsR0FBOUIsRUFBbUMsV0FBbkMsR0FBaUQsTUFBSyxZQUFMLENBQWtCLFNBQWxCLENBQWpEOztBQUNBLFVBQUssVUFBTCxDQUFnQixhQUFoQixDQUE4QixLQUE5QixFQUFxQyxnQkFBckMsQ0FBc0QsT0FBdEQsRUFBK0QsWUFBTTtBQUNqRSxZQUFLLElBQUw7O0FBQ0EsWUFBSyxLQUFMO0FBQ0gsS0FIRDs7QUFOVTtBQVViOzs7OzZDQU13QixJLEVBQU0sUSxFQUFVLFEsRUFBVTtBQUMvQyxVQUFJLFFBQVEsSUFBSSxRQUFaLElBQXdCLFFBQVEsSUFBSSxFQUF4QyxFQUE0QztBQUN4QyxZQUFNLEdBQUcsR0FBRyxLQUFLLFlBQUwsQ0FBa0IsS0FBbEIsQ0FBWjtBQUNBLFlBQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxlQUFOLENBQXNCLGNBQXRCLENBQXRCOztBQUNBLFlBQUksYUFBSixFQUFtQjtBQUNmLGNBQUksQ0FBQyxhQUFhLENBQUMsUUFBZCxDQUF1QixHQUF2QixDQUFMLEVBQWtDO0FBQzlCLGlCQUFLLGFBQUw7QUFDQSxpQkFBSyxJQUFMO0FBQ0g7QUFDSixTQUxELE1BS087QUFDSCxlQUFLLGFBQUw7QUFDQSxlQUFLLElBQUw7QUFDSDtBQUNKO0FBQ0o7OztvQ0FFZTtBQUNaLFdBQUssVUFBTCxDQUFnQixhQUFoQixDQUE4QixHQUE5QixFQUFtQyxXQUFuQyxHQUFpRCxLQUFLLFlBQUwsQ0FBa0IsU0FBbEIsQ0FBakQ7QUFDSDs7OzJCQUVNO0FBQ0gsV0FBSyxVQUFMLENBQWdCLGFBQWhCLENBQThCLEtBQTlCLEVBQXFDLFNBQXJDLENBQStDLE1BQS9DLENBQXNELE1BQXREO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixFQUErQixTQUEvQixDQUF5QyxHQUF6QyxDQUE2QyxtQkFBN0M7QUFDSDs7OzJCQUVNO0FBQ0gsV0FBSyxVQUFMLENBQWdCLGFBQWhCLENBQThCLEtBQTlCLEVBQXFDLFNBQXJDLENBQStDLEdBQS9DLENBQW1ELE1BQW5EO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixFQUErQixTQUEvQixDQUF5QyxNQUF6QyxDQUFnRCxtQkFBaEQ7QUFDSDs7OzRCQUVPO0FBQ0osVUFBSSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsY0FBdkIsQ0FBSixFQUE0QztBQUN4QyxZQUFNLGFBQWEsR0FBRyxLQUFLLENBQUMsZUFBTixDQUFzQixjQUF0QixDQUF0QjtBQUNBLFlBQU0sV0FBVyxHQUFHLGFBQWEsR0FBRyxhQUFILEdBQW1CLEVBQXBEO0FBRUEsUUFBQSxXQUFXLENBQUMsSUFBWixDQUFpQixLQUFLLFlBQUwsQ0FBa0IsS0FBbEIsQ0FBakI7QUFDQSxRQUFBLEtBQUssQ0FBQyxlQUFOLENBQXNCLGNBQXRCLEVBQXNDLFdBQXRDO0FBQ0g7QUFDSjs7O3dCQTFDK0I7QUFDNUIsYUFBTyxDQUFDLEtBQUQsQ0FBUDtBQUNIOzs7O2lDQWhCNEIsVzs7QUEyRGpDLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLHFCQUE3QixFQUFvRCxrQkFBcEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL21vZHVsZXMvdXRpbHMubWpzJ1xuaW1wb3J0ICogYXMgc2VhcmNoIGZyb20gJy4vbW9kdWxlcy9zZWFyY2gubWpzJ1xuaW1wb3J0IHNjaGVkdWxlSGFuZGxlciBmcm9tICcuL21vZHVsZXMvc2NoZWR1bGUubWpzJ1xuaW1wb3J0IHVyZ2VudEFubm91bmNlbWVudCBmcm9tICcuL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzJ1xuXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmlkLnRvTG93ZXJDYXNlKClcblxuXG4vL2luaXQgZGFzaGJvYXJkXG5pZiAocGFnZSA9PT0gJ2Rhc2hib2FyZCcpIHtcbiAgICBzY2hlZHVsZUhhbmRsZXIoKVxufVxuXG5cbi8vdXJnZW50IGFubm91bmNlbWVudHNcbmNvbnN0IHNvY2tldCA9IGlvKClcblxuLy9zdWJzY3JpYmUgdG8gdXJnZW50LWFubm91bmNlbWVudHNcbnNvY2tldC5lbWl0KCdqb2luJywgcGFnZSlcblxuLy9vbiB1cmdlbnQtYW5ub3VuY2VtZW50IGhvb2sgdXBkYXRlIGludGVyZmFjZSAoc2VlIFdDX3VyZ2VudEFubm91bmNlbWVudClcbnNvY2tldC5vbigndXJnZW50LWFubm91bmNlbWVudCcsIGFubm91bmNlbWVudCA9PiB7XG4gICAgY29uc3QgdXJnZW50QW5ub3VuY2VtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndXJnZW50LWFubm91bmNlbWVudCcpXG5cbiAgICBpZiAodXRpbHMuZXhpc3RzKFt1cmdlbnRBbm5vdW5jZW1lbnRdKSkge1xuICAgICAgICB1cmdlbnRBbm5vdW5jZW1lbnQuc2V0QXR0cmlidXRlKCdtZXNzYWdlJywgYW5ub3VuY2VtZW50LnRpdGxlKVxuICAgICAgICB1cmdlbnRBbm5vdW5jZW1lbnQuc2V0QXR0cmlidXRlKCd1aWQnLCBhbm5vdW5jZW1lbnQubmV3c0l0ZW1JZClcbiAgICB9XG59KVxuXG5cblxuXG4vL21lbnUgXG5jb25zdCBtZW51SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWljb24nKVxuY29uc3QgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JylcblxuaWYgKHV0aWxzLmV4aXN0cyhbbWVudUljb24sIG1lbnVdKSkge1xuXG4gICAgLy90b2dnbGUgbWVudSAob24gbW9iaWxlKVxuICAgIG1lbnVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKVxuICAgIH0pXG59XG5cblxuXG5cbi8vc2VhcmNoIFxuY29uc3Qgc2VhcmNoQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1iYXInKVxuY29uc3Qgc2VhcmNoUmVzZXRJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1yZXNldCcpXG5jb25zdCBzZWFyY2hJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaC1jb250YWluZXIgaW5wdXRbdHlwZT1zdWJtaXRdJylcblxuaWYgKHV0aWxzLmV4aXN0cyhbc2VhcmNoQmFyLCBzZWFyY2hSZXNldEljb24sIHNlYXJjaEljb25dKSkge1xuXG4gICAgLy9jb250cm9sIHNlYXJjaC1yZXNldCBpY29uIFxuICAgIHNlYXJjaEJhci5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHNlYXJjaC5zaG93UmVzZXQoKSlcbiAgICBzZWFyY2hCYXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHNlYXJjaC5oaWRlUmVzZXQoKSlcblxuXG4gICAgLy9yZXNldCBzZWFyY2ggaW5wdXRcbiAgICBzZWFyY2hSZXNldEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHNlYXJjaC5yZXNldChlKSlcblxuXG4gICAgLy9kZXBlbmRpbmcgb24gc2VhcmNoLXF1ZXJ5IGVpdGhlciBnaXZlIGZvY3VzIHRvIHNlYXJjaGJhciBvciBzdWJtaXQgc2VhcmNoLXF1ZXJ5XG4gICAgc2VhcmNoSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBpZiAoc2VhcmNoQmFyLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBzZWFyY2guZm9jdXMoZSlcbiAgICAgICAgfVxuICAgIH0pXG5cblxuICAgIC8vbGlzdGVuIHRvIGtleWJvYXJkIGlucHV0XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgY2FzZSBcIi9cIjpcbiAgICAgICAgICAgICAgICBzZWFyY2guZm9jdXMoZSkgLy9naXZlIHNlYXJjaGJhciBmb2N1cyBhbmQgaGlkZSBzZWFyY2gtcmVzZXQgaWNvblxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9KVxufSIsImNvbnN0IHNjaGVkdWxlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NjaGVkdWxlcy1jb250YWluZXInKVxuY29uc3QgZGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmF2aWdhdG9yIHNwYW4nKVxuY29uc3QgcHJldmlvdXNTY2hlZHVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXZpZ2F0b3IgaW1nOmZpcnN0LW9mLXR5cGUnKVxuY29uc3QgbmV4dFNjaGVkdWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdmlnYXRvciBpbWc6bGFzdC1vZi10eXBlJylcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2NoZWR1bGVIYW5kbGVyKCkge1xuICAgIGxldCBzY2hlZHVsZUluZGV4ID0gMFxuICAgIGFycm93SGFuZGxlcihzY2hlZHVsZUluZGV4KVxuXG4gICAgcHJldmlvdXNTY2hlZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2NoZWR1bGVJbmRleC0tXG4gICAgICAgIGFycm93SGFuZGxlcihzY2hlZHVsZUluZGV4KVxuICAgICAgICByZW5kZXJTY2hlZHVsZXMoc2NoZWR1bGVJbmRleClcbiAgICB9KVxuXG4gICAgbmV4dFNjaGVkdWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBzY2hlZHVsZUluZGV4KytcbiAgICAgICAgYXJyb3dIYW5kbGVyKHNjaGVkdWxlSW5kZXgpXG4gICAgICAgIHJlbmRlclNjaGVkdWxlcyhzY2hlZHVsZUluZGV4KVxuICAgIH0pXG59XG5cblxuLy8gSGVscGVyc1xuZnVuY3Rpb24gcmVuZGVyU2NoZWR1bGVzKHNjaGVkdWxlSW5kZXgpIHtcbiAgICBnZXRTY2hlZHVsZXMoKVxuICAgICAgICAudGhlbihzY2hlZHVsZXMgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGUgPSBzY2hlZHVsZXNbc2NoZWR1bGVJbmRleF1cbiAgICAgICAgICAgIGNvbnN0IGRpdnMgPSBzY2hlZHVsZS5zY2hlZHVsZXMubWFwKHNjaGVkdWxlID0+IGNyZWF0ZVNjaGVkdWxlSXRlbShzY2hlZHVsZSkpXG5cbiAgICAgICAgICAgIGRhdGVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7c2NoZWR1bGUuZGF5fS0ke3NjaGVkdWxlLm1vbnRofS0ke3NjaGVkdWxlLnllYXJ9YFxuXG4gICAgICAgICAgICBzY2hlZHVsZUNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnXG4gICAgICAgICAgICBkaXZzLmZvckVhY2goZGl2ID0+IHNjaGVkdWxlQ29udGFpbmVyLmFwcGVuZChkaXYpKVxuICAgICAgICB9KVxufVxuXG5mdW5jdGlvbiBhcnJvd0hhbmRsZXIoaW5kZXgpIHtcbiAgICBpbmRleCA9PT0gMCA/IHByZXZpb3VzU2NoZWR1bGUuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKSA6IHByZXZpb3VzU2NoZWR1bGUuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKVxuICAgIGluZGV4ID09PSA0ID8gbmV4dFNjaGVkdWxlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJykgOiBuZXh0U2NoZWR1bGUuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTY2hlZHVsZUl0ZW0oc2NoZWR1bGUpIHtcbiAgICBjb25zdCBzY2hlZHVsZV90aW1lID0gYCR7c2NoZWR1bGUuc3RhcnREYXRlVGltZS50aW1lfSAtICR7c2NoZWR1bGUuZW5kRGF0ZVRpbWUudGltZX1gXG4gICAgY29uc3Qgc2NoZWR1bGVfY291cnNlbmFtZSA9IHNjaGVkdWxlLl9saW5rcy5jb3Vyc2VzWzBdLnRpdGxlXG4gICAgY29uc3Qgc2NoZWR1bGVfdGVhY2hlciA9IHNjaGVkdWxlLl9saW5rcy5sZWN0dXJlcnNbMF0udGl0bGVcblxuICAgIGxldCBzY2hlZHVsZV9yb29tXG4gICAgc2NoZWR1bGUuX2VtYmVkZGVkID8gc2NoZWR1bGVfcm9vbSA9IHNjaGVkdWxlLl9lbWJlZGRlZC5yb29tc1swXS5hYmJyZXZpYXRpb24gOiBzY2hlZHVsZV9yb29tID0gJ05vIHJvb20nXG5cbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBjb25zdCBjb3Vyc2VuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgY29uc3Qgcm9vbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgIGNvbnN0IHRlYWNoZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcblxuICAgIHRpbWUudGV4dENvbnRlbnQgPSBzY2hlZHVsZV90aW1lXG4gICAgY291cnNlbmFtZS50ZXh0Q29udGVudCA9IHNjaGVkdWxlX2NvdXJzZW5hbWVcbiAgICByb29tLnRleHRDb250ZW50ID0gc2NoZWR1bGVfcm9vbVxuICAgIHRlYWNoZXIudGV4dENvbnRlbnQgPSBzY2hlZHVsZV90ZWFjaGVyXG5cbiAgICBkaXYuYXBwZW5kKHRpbWUpXG4gICAgZGl2LmFwcGVuZChjb3Vyc2VuYW1lKVxuICAgIGRpdi5hcHBlbmQocm9vbSlcbiAgICBkaXYuYXBwZW5kKHRlYWNoZXIpXG5cbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgnc2NoZWR1bGUtY291cnNlJylcblxuICAgIHJldHVybiBkaXZcbn1cblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbn1cblxuLy8gRGF0YVxuZnVuY3Rpb24gZ2V0U2NoZWR1bGVzKCkge1xuICAgIHJldHVybiBmZXRjaCgnL3NjaGVkdWxlJywgb3B0aW9ucylcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG59IiwiY29uc3Qgc2VhcmNoQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1iYXInKVxuY29uc3Qgc2VhcmNoUmVzZXRJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1yZXNldCcpXG5cbmV4cG9ydCBmdW5jdGlvbiBmb2N1cyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2VhcmNoQmFyLmZvY3VzKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dSZXNldCgpIHtcbiAgICBzZWFyY2hSZXNldEljb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlUmVzZXQoKSB7XG4gICAgaWYgKHNlYXJjaEJhci52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICBzZWFyY2hSZXNldEljb24uY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQoZSkge1xuICAgIHNlYXJjaEJhci52YWx1ZSA9IFwiXCJcbiAgICBmb2N1cyhlKVxufSIsImV4cG9ydCBmdW5jdGlvbiBleGlzdHMoWy4uLnZhcmlhYmxlc10pIHtcbiAgICBjb25zdCBleGlzdHMgPSB2YXJpYWJsZXMuZXZlcnkodmFyaWFibGUgPT4gdmFyaWFibGUgIT0gbnVsbClcbiAgICByZXR1cm4gZXhpc3RzXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZShuYW1lLCBpdGVtKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgSlNPTi5zdHJpbmdpZnkoaXRlbSkpXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZShpdGVtKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oaXRlbSkpXG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHsgLy9zb3VyY2U6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJfU3RvcmFnZV9BUEkvVXNpbmdfdGhlX1dlYl9TdG9yYWdlX0FQSVxuICAgIGxldCBzdG9yYWdlXG4gICAgdHJ5IHtcbiAgICAgICAgc3RvcmFnZSA9IHdpbmRvd1t0eXBlXVxuICAgICAgICBsZXQgeCA9ICdfX3N0b3JhZ2VfdGVzdF9fJ1xuICAgICAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeClcbiAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgZS5jb2RlID09PSAyMiB8fFxuICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gMTAxNCB8fFxuICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHxcbiAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCcpICYmXG4gICAgICAgICAgICAoc3RvcmFnZSAmJiBzdG9yYWdlLmxlbmd0aCAhPT0gMClcbiAgICB9XG59IiwiaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vbW9kdWxlcy91dGlscy5tanMnXG5cbmV4cG9ydCB7IHRlbXBsYXRlIGFzIFdDX3VyZ2VudEFubm91bmNlbWVudCB9XG5cbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKVxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuPHN0eWxlPlxuICAgIGRpdiB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDUwcHg7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogNTBweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0VDRTdGQTtcbiAgICB9XG4gICAgZGl2LmhpZGUge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IC05OTk5cHg7XG4gICAgfVxuICAgIHAge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMzBweDtcbiAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0O1xuICAgIH1cbiAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQyNXB4KSB7XG4gICAgICAgIHAge1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgICAgICB9XG4gICAgfVxuICAgIGltZyB7XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7XG4gICAgICAgIGdyaWQtY29sdW1uOiAyIC8gMztcbiAgICAgICAganVzdGlmeS1zZWxmOiBlbmQ7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG48L3N0eWxlPlxuPGRpdiBjbGFzcz1cImhpZGVcIj5cbiAgICA8cD48L3A+XG4gICAgPGltZyBzcmM9XCIuL21lZGlhL2ljb25zL25vdGlmaWNhdGlvbi1leGl0LnN2Z1wiIGFsdD1cImhpZGUgbm90aWZpY2F0aW9uXCI+XG48L2Rpdj5gXG5cblxuXG5jbGFzcyB1cmdlbnRBbm5vdW5jZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKVxuXG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSlcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ3AnKS50ZXh0Q29udGVudCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdtZXNzYWdlJylcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlKClcbiAgICAgICAgICAgIHRoaXMuc3RvcmUoKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gWyd1aWQnXVxuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlICYmIG5ld1ZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKCd1aWQnKVxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkSGlzdG9yeSA9IHV0aWxzLmdldExvY2FsU3RvcmFnZSgncmVhZC1oaXN0b3J5JylcbiAgICAgICAgICAgIGlmIChzdG9yZWRIaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdG9yZWRIaXN0b3J5LmluY2x1ZGVzKHVpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudCgpXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZUNvbnRlbnQoKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdwJykudGV4dENvbnRlbnQgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbWVzc2FnZScpXG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuY2xhc3NMaXN0LmFkZCgnc2hvd3NOb3RpZmljYXRpb24nKVxuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdkaXYnKS5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3dzTm90aWZpY2F0aW9uJylcbiAgICB9XG5cbiAgICBzdG9yZSgpIHtcbiAgICAgICAgaWYgKHV0aWxzLnN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yZWRIaXN0b3J5ID0gdXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCdyZWFkLWhpc3RvcnknKVxuICAgICAgICAgICAgY29uc3QgcmVhZEhpc3RvcnkgPSBzdG9yZWRIaXN0b3J5ID8gc3RvcmVkSGlzdG9yeSA6IFtdXG5cbiAgICAgICAgICAgIHJlYWRIaXN0b3J5LnB1c2godGhpcy5nZXRBdHRyaWJ1dGUoJ3VpZCcpKVxuICAgICAgICAgICAgdXRpbHMuc2V0TG9jYWxTdG9yYWdlKCdyZWFkLWhpc3RvcnknLCByZWFkSGlzdG9yeSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndXJnZW50LWFubm91bmNlbWVudCcsIHVyZ2VudEFubm91bmNlbWVudCkiXX0="}