{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/modules/schedule.mjs","src/js/modules/search.mjs","src/js/modules/utils.mjs","src/js/web-components/urgent-announcement.mjs"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as utils from './modules/utils.mjs'\nimport * as search from './modules/search.mjs'\nimport scheduleHandler from './modules/schedule.mjs'\nimport urgentAnnouncement from './web-components/urgent-announcement.mjs'\n\nconst page = document.querySelector('main').id.toLowerCase()\n\n\n//init dashboard\nscheduleHandler()\n\n\n//urgent announcements\nconst socket = io()\n\n//subscribe to urgent-announcements\nsocket.emit('join', page)\n\n//on urgent-announcement hook update interface (see WC_urgentAnnouncement)\nsocket.on('urgent-announcement', announcement => {\n    const urgentAnnouncement = document.querySelector('urgent-announcement')\n\n    if (utils.exists([urgentAnnouncement])) {\n        urgentAnnouncement.setAttribute('message', announcement.title)\n        urgentAnnouncement.setAttribute('uid', announcement.newsItemId)\n    }\n})\n\n\n\n\n//menu \nconst menuIcon = document.getElementById('menu-icon')\nconst menu = document.getElementById('menu')\n\nif (utils.exists([menuIcon, menu])) {\n\n    //toggle menu (on mobile)\n    menuIcon.addEventListener('click', () => {\n        menu.classList.toggle('hide')\n    })\n}\n\n\n\n\n//search \nconst searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\nconst searchIcon = document.querySelector('#search-container input[type=submit]')\n\nif (utils.exists([searchBar, searchResetIcon, searchIcon])) {\n\n    //control search-reset icon \n    searchBar.addEventListener('focus', () => search.showReset())\n    searchBar.addEventListener('blur', () => search.hideReset())\n\n\n    //reset search input\n    searchResetIcon.addEventListener('click', e => search.reset(e))\n\n\n    //depending on search-query either give focus to searchbar or submit search-query\n    searchIcon.addEventListener('click', e => {\n        if (searchBar.value === \"\") {\n            search.focus(e)\n        }\n    })\n\n\n    //listen to keyboard input\n    document.addEventListener('keypress', e => {\n        switch (e.key) {\n            case \"/\":\n                search.focus(e) //give searchbar focus and hide search-reset icon\n                break\n        }\n    })\n}","const scheduleMaster = document.querySelector('#schedule')\nconst scheduleContainer = scheduleMaster.querySelector('#schedules-container')\nconst dateElement = scheduleMaster.querySelector('#navigator span')\nconst previousSchedule = scheduleMaster.querySelector('#navigator img:first-of-type')\nconst nextSchedule = scheduleMaster.querySelector('#navigator img:last-of-type')\n\nexport default function scheduleHandler() {\n    let scheduleIndex = 0\n    arrowHandler(scheduleIndex)\n\n    previousSchedule.addEventListener('click', () => {\n        scheduleIndex--\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n\n    nextSchedule.addEventListener('click', () => {\n        scheduleIndex++\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n}\n\n\n// Helpers\nfunction renderSchedules(scheduleIndex) {\n    getSchedules()\n        .then(schedules => {\n            const schedule = schedules[scheduleIndex]\n            const divs = schedule.schedules.map(schedule => createScheduleItem(schedule))\n\n            dateElement.textContent = `${schedule.day}-${schedule.month}-${schedule.year}`\n\n            scheduleContainer.textContent = ''\n            divs.forEach(div => scheduleContainer.append(div))\n        })\n}\n\nfunction arrowHandler(index) {\n    index === 0 ? previousSchedule.classList.add('disabled') : previousSchedule.classList.remove('disabled')\n    index === 4 ? nextSchedule.classList.add('disabled') : nextSchedule.classList.remove('disabled')\n}\n\nfunction createScheduleItem(schedule) {\n    const schedule_time = `${schedule.startDateTime.time} - ${schedule.endDateTime.time}`\n    const schedule_coursename = schedule._links.courses[0].title\n    const schedule_teacher = schedule._links.lecturers[0].title\n\n    let schedule_room\n    schedule._embedded ? schedule_room = schedule._embedded.rooms[0].abbreviation : schedule_room = 'No room'\n\n    const div = document.createElement('div')\n    const time = document.createElement('p')\n    const coursename = document.createElement('p')\n    const room = document.createElement('p')\n    const teacher = document.createElement('p')\n\n    time.textContent = schedule_time\n    coursename.textContent = schedule_coursename\n    room.textContent = schedule_room\n    teacher.textContent = schedule_teacher\n\n    div.append(time)\n    div.append(coursename)\n    div.append(room)\n    div.append(teacher)\n\n    div.classList.add('schedule-course')\n\n    return div\n}\n\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n}\n\n// Data\nfunction getSchedules() {\n    return fetch('/schedule', options)\n        .then(res => res.json())\n}","const searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\n\nexport function focus(e) {\n    e.preventDefault()\n    searchBar.focus()\n}\n\nexport function showReset() {\n    searchResetIcon.classList.remove('hide')\n}\n\nexport function hideReset() {\n    if (searchBar.value === \"\") {\n        searchResetIcon.classList.add('hide')\n    }\n}\n\nexport function reset(e) {\n    searchBar.value = \"\"\n    focus(e)\n}","export function exists([...variables]) {\n    const exists = variables.every(variable => variable != null)\n    return exists\n}\n\n\nexport function setLocalStorage(name, item) {\n    localStorage.setItem(name, JSON.stringify(item))\n}\n\n\nexport function getLocalStorage(item) {\n    return JSON.parse(localStorage.getItem(item))\n}\n\n\n\n\nexport function storageAvailable(type) { //source: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n    let storage\n    try {\n        storage = window[type]\n        let x = '__storage_test__'\n        storage.setItem(x, x)\n        storage.removeItem(x)\n        return true\n    } catch (e) {\n        return e instanceof DOMException && (\n                e.code === 22 ||\n                e.code === 1014 ||\n                e.name === 'QuotaExceededError' ||\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            (storage && storage.length !== 0)\n    }\n}","import * as utils from '../modules/utils.mjs'\n\nexport { template as WC_urgentAnnouncement }\n\nconst template = document.createElement('template')\ntemplate.innerHTML = `\n<style>\n    div {\n        display: grid;\n        grid-template-columns: 1fr 50px;\n        grid-template-rows: 50px;\n        align-items: center;\n        background-color: #ECE7FA;\n    }\n    div.hide {\n        position: absolute;\n        left: -9999px;\n    }\n    p {\n        margin: 0;\n        padding-left: 30px;\n        color: black;\n        justify-self: start;\n    }\n    @media only screen and (max-width: 425px) {\n        p {\n            padding-left: 10px;\n        }\n    }\n    img {\n        padding-right: 20px;\n        grid-column: 2 / 3;\n        justify-self: end;\n        cursor: pointer;\n    }\n</style>\n<div class=\"hide\">\n    <p></p>\n    <img src=\"./media/icons/notification-exit.svg\" alt=\"hide notification\">\n</div>`\n\n\n\nclass urgentAnnouncement extends HTMLElement {\n\n    constructor() {\n        super()\n\n        this.attachShadow({ mode: 'open' })\n        this.shadowRoot.appendChild(template.content.cloneNode(true))\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n        this.shadowRoot.querySelector('img').addEventListener('click', () => {\n            this.hide()\n            this.store()\n        })\n    }\n\n    static get observedAttributes() {\n        return ['uid']\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue != newValue && newValue != \"\") {\n            const uid = this.getAttribute('uid')\n            const storedHistory = utils.getLocalStorage('read-history')\n            if (storedHistory) {\n                if (!storedHistory.includes(uid)) {\n                    this.updateContent()\n                    this.show()\n                }\n            } else {\n                this.updateContent()\n                this.show()\n            }\n        }\n    }\n\n    updateContent() {\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n    }\n\n    show() {\n        this.shadowRoot.querySelector('div').classList.remove('hide')\n        document.querySelector('main').classList.add('showsNotification')\n    }\n\n    hide() {\n        this.shadowRoot.querySelector('div').classList.add('hide')\n        document.querySelector('main').classList.remove('showsNotification')\n    }\n\n    store() {\n        if (utils.storageAvailable('localStorage')) {\n            const storedHistory = utils.getLocalStorage('read-history')\n            const readHistory = storedHistory ? storedHistory : []\n\n            readHistory.push(this.getAttribute('uid'))\n            utils.setLocalStorage('read-history', readHistory)\n        }\n    }\n}\n\nwindow.customElements.define('urgent-announcement', urgentAnnouncement)"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvbW9kdWxlcy9zY2hlZHVsZS5tanMiLCJzcmMvanMvbW9kdWxlcy9zZWFyY2gubWpzIiwic3JjL2pzL21vZHVsZXMvdXRpbHMubWpzIiwic3JjL2pzL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLEVBQS9CLENBQWtDLFdBQWxDLEVBQWIsQyxDQUdBOztBQUNBLDRCLENBR0E7O0FBQ0EsSUFBTSxNQUFNLEdBQUcsRUFBRSxFQUFqQixDLENBRUE7O0FBQ0EsTUFBTSxDQUFDLElBQVAsQ0FBWSxNQUFaLEVBQW9CLElBQXBCLEUsQ0FFQTs7QUFDQSxNQUFNLENBQUMsRUFBUCxDQUFVLHFCQUFWLEVBQWlDLFVBQUEsWUFBWSxFQUFJO0FBQzdDLE1BQU0sa0JBQWtCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIscUJBQXZCLENBQTNCOztBQUVBLE1BQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLGtCQUFELENBQWIsQ0FBSixFQUF3QztBQUNwQyxJQUFBLGtCQUFrQixDQUFDLFlBQW5CLENBQWdDLFNBQWhDLEVBQTJDLFlBQVksQ0FBQyxLQUF4RDtBQUNBLElBQUEsa0JBQWtCLENBQUMsWUFBbkIsQ0FBZ0MsS0FBaEMsRUFBdUMsWUFBWSxDQUFDLFVBQXBEO0FBQ0g7QUFDSixDQVBELEUsQ0FZQTs7QUFDQSxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixXQUF4QixDQUFqQjtBQUNBLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLE1BQXhCLENBQWI7O0FBRUEsSUFBSSxLQUFL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QUE4QixLQUE5QixFQUFxQyxTQUFyQyxDQUErQyxHQUEvQyxDQUFtRCxNQUFuRDtBQUNBLE1BQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsU0FBL0IsQ0FBeUMsTUFBekMsQ0FBZ0QsbUJBQWhEO0FBQ0g7Ozs0QkFFTztBQUNKLFVBQUksS0FBSyxDQUFDLGdCQUFOLENBQXVCLGNBQXZCLENBQUosRUFBNEM7QUFDeEMsWUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLGVBQU4sQ0FBc0IsY0FBdEIsQ0FBdEI7QUFDQSxZQUFNLFdBQVcsR0FBRyxhQUFhLEdBQUcsYUFBSCxHQUFtQixFQUFwRDtBQUVBLFFBQUEsV0FBVyxDQUFDLElBQVosQ0FBaUIsS0FBSyxZQUFMLENBQWtCLEtBQWxCLENBQWpCO0FBQ0EsUUFBQSxLQUFLLENBQUMsZUFBTixDQUFzQixjQUF0QixFQUFzQyxXQUF0QztBQUNIO0FBQ0o7Ozt3QkExQytCO0FBQzVCLGFBQU8sQ0FBQyxLQUFELENBQVA7QUFDSDs7OztpQ0FoQjRCLFc7O0FBMkRqQyxNQUFNLENBQUMsY0FBUCxDQUFzQixNQUF0QixDQUE2QixxQkFBN0IsRUFBb0Qsa0JBQXBEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi9tb2R1bGVzL3V0aWxzLm1qcydcbmltcG9ydCAqIGFzIHNlYXJjaCBmcm9tICcuL21vZHVsZXMvc2VhcmNoLm1qcydcbmltcG9ydCBzY2hlZHVsZUhhbmRsZXIgZnJvbSAnLi9tb2R1bGVzL3NjaGVkdWxlLm1qcydcbmltcG9ydCB1cmdlbnRBbm5vdW5jZW1lbnQgZnJvbSAnLi93ZWItY29tcG9uZW50cy91cmdlbnQtYW5ub3VuY2VtZW50Lm1qcydcblxuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pZC50b0xvd2VyQ2FzZSgpXG5cblxuLy9pbml0IGRhc2hib2FyZFxuc2NoZWR1bGVIYW5kbGVyKClcblxuXG4vL3VyZ2VudCBhbm5vdW5jZW1lbnRzXG5jb25zdCBzb2NrZXQgPSBpbygpXG5cbi8vc3Vic2NyaWJlIHRvIHVyZ2VudC1hbm5vdW5jZW1lbnRzXG5zb2NrZXQuZW1pdCgnam9pbicsIHBhZ2UpXG5cbi8vb24gdXJnZW50LWFubm91bmNlbWVudCBob29rIHVwZGF0ZSBpbnRlcmZhY2UgKHNlZSBXQ191cmdlbnRBbm5vdW5jZW1lbnQpXG5zb2NrZXQub24oJ3VyZ2VudC1hbm5vdW5jZW1lbnQnLCBhbm5vdW5jZW1lbnQgPT4ge1xuICAgIGNvbnN0IHVyZ2VudEFubm91bmNlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VyZ2VudC1hbm5vdW5jZW1lbnQnKVxuXG4gICAgaWYgKHV0aWxzLmV4aXN0cyhbdXJnZW50QW5ub3VuY2VtZW50XSkpIHtcbiAgICAgICAgdXJnZW50QW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgnbWVzc2FnZScsIGFubm91bmNlbWVudC50aXRsZSlcbiAgICAgICAgdXJnZW50QW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgndWlkJywgYW5ub3VuY2VtZW50Lm5ld3NJdGVtSWQpXG4gICAgfVxufSlcblxuXG5cblxuLy9tZW51IFxuY29uc3QgbWVudUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1pY29uJylcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpXG5cbmlmICh1dGlscy5leGlzdHMoW21lbnVJY29uLCBtZW51XSkpIHtcblxuICAgIC8vdG9nZ2xlIG1lbnUgKG9uIG1vYmlsZSlcbiAgICBtZW51SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJylcbiAgICB9KVxufVxuXG5cblxuXG4vL3NlYXJjaCBcbmNvbnN0IHNlYXJjaEJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtYmFyJylcbmNvbnN0IHNlYXJjaFJlc2V0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzZXQnKVxuY29uc3Qgc2VhcmNoSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gtY29udGFpbmVyIGlucHV0W3R5cGU9c3VibWl0XScpXG5cbmlmICh1dGlscy5leGlzdHMoW3NlYXJjaEJhciwgc2VhcmNoUmVzZXRJY29uLCBzZWFyY2hJY29uXSkpIHtcblxuICAgIC8vY29udHJvbCBzZWFyY2gtcmVzZXQgaWNvbiBcbiAgICBzZWFyY2hCYXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiBzZWFyY2guc2hvd1Jlc2V0KCkpXG4gICAgc2VhcmNoQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiBzZWFyY2guaGlkZVJlc2V0KCkpXG5cblxuICAgIC8vcmVzZXQgc2VhcmNoIGlucHV0XG4gICAgc2VhcmNoUmVzZXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBzZWFyY2gucmVzZXQoZSkpXG5cblxuICAgIC8vZGVwZW5kaW5nIG9uIHNlYXJjaC1xdWVyeSBlaXRoZXIgZ2l2ZSBmb2N1cyB0byBzZWFyY2hiYXIgb3Igc3VibWl0IHNlYXJjaC1xdWVyeVxuICAgIHNlYXJjaEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgaWYgKHNlYXJjaEJhci52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgc2VhcmNoLmZvY3VzKGUpXG4gICAgICAgIH1cbiAgICB9KVxuXG5cbiAgICAvL2xpc3RlbiB0byBrZXlib2FyZCBpbnB1dFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCIvXCI6XG4gICAgICAgICAgICAgICAgc2VhcmNoLmZvY3VzKGUpIC8vZ2l2ZSBzZWFyY2hiYXIgZm9jdXMgYW5kIGhpZGUgc2VhcmNoLXJlc2V0IGljb25cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfSlcbn0iLCJjb25zdCBzY2hlZHVsZU1hc3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzY2hlZHVsZScpXG5jb25zdCBzY2hlZHVsZUNvbnRhaW5lciA9IHNjaGVkdWxlTWFzdGVyLnF1ZXJ5U2VsZWN0b3IoJyNzY2hlZHVsZXMtY29udGFpbmVyJylcbmNvbnN0IGRhdGVFbGVtZW50ID0gc2NoZWR1bGVNYXN0ZXIucXVlcnlTZWxlY3RvcignI25hdmlnYXRvciBzcGFuJylcbmNvbnN0IHByZXZpb3VzU2NoZWR1bGUgPSBzY2hlZHVsZU1hc3Rlci5xdWVyeVNlbGVjdG9yKCcjbmF2aWdhdG9yIGltZzpmaXJzdC1vZi10eXBlJylcbmNvbnN0IG5leHRTY2hlZHVsZSA9IHNjaGVkdWxlTWFzdGVyLnF1ZXJ5U2VsZWN0b3IoJyNuYXZpZ2F0b3IgaW1nOmxhc3Qtb2YtdHlwZScpXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNjaGVkdWxlSGFuZGxlcigpIHtcbiAgICBsZXQgc2NoZWR1bGVJbmRleCA9IDBcbiAgICBhcnJvd0hhbmRsZXIoc2NoZWR1bGVJbmRleClcblxuICAgIHByZXZpb3VzU2NoZWR1bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNjaGVkdWxlSW5kZXgtLVxuICAgICAgICBhcnJvd0hhbmRsZXIoc2NoZWR1bGVJbmRleClcbiAgICAgICAgcmVuZGVyU2NoZWR1bGVzKHNjaGVkdWxlSW5kZXgpXG4gICAgfSlcblxuICAgIG5leHRTY2hlZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2NoZWR1bGVJbmRleCsrXG4gICAgICAgIGFycm93SGFuZGxlcihzY2hlZHVsZUluZGV4KVxuICAgICAgICByZW5kZXJTY2hlZHVsZXMoc2NoZWR1bGVJbmRleClcbiAgICB9KVxufVxuXG5cbi8vIEhlbHBlcnNcbmZ1bmN0aW9uIHJlbmRlclNjaGVkdWxlcyhzY2hlZHVsZUluZGV4KSB7XG4gICAgZ2V0U2NoZWR1bGVzKClcbiAgICAgICAgLnRoZW4oc2NoZWR1bGVzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVkdWxlID0gc2NoZWR1bGVzW3NjaGVkdWxlSW5kZXhdXG4gICAgICAgICAgICBjb25zdCBkaXZzID0gc2NoZWR1bGUuc2NoZWR1bGVzLm1hcChzY2hlZHVsZSA9PiBjcmVhdGVTY2hlZHVsZUl0ZW0oc2NoZWR1bGUpKVxuXG4gICAgICAgICAgICBkYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3NjaGVkdWxlLmRheX0tJHtzY2hlZHVsZS5tb250aH0tJHtzY2hlZHVsZS55ZWFyfWBcblxuICAgICAgICAgICAgc2NoZWR1bGVDb250YWluZXIudGV4dENvbnRlbnQgPSAnJ1xuICAgICAgICAgICAgZGl2cy5mb3JFYWNoKGRpdiA9PiBzY2hlZHVsZUNvbnRhaW5lci5hcHBlbmQoZGl2KSlcbiAgICAgICAgfSlcbn1cblxuZnVuY3Rpb24gYXJyb3dIYW5kbGVyKGluZGV4KSB7XG4gICAgaW5kZXggPT09IDAgPyBwcmV2aW91c1NjaGVkdWxlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJykgOiBwcmV2aW91c1NjaGVkdWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJylcbiAgICBpbmRleCA9PT0gNCA/IG5leHRTY2hlZHVsZS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpIDogbmV4dFNjaGVkdWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJylcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVJdGVtKHNjaGVkdWxlKSB7XG4gICAgY29uc3Qgc2NoZWR1bGVfdGltZSA9IGAke3NjaGVkdWxlLnN0YXJ0RGF0ZVRpbWUudGltZX0gLSAke3NjaGVkdWxlLmVuZERhdGVUaW1lLnRpbWV9YFxuICAgIGNvbnN0IHNjaGVkdWxlX2NvdXJzZW5hbWUgPSBzY2hlZHVsZS5fbGlua3MuY291cnNlc1swXS50aXRsZVxuICAgIGNvbnN0IHNjaGVkdWxlX3RlYWNoZXIgPSBzY2hlZHVsZS5fbGlua3MubGVjdHVyZXJzWzBdLnRpdGxlXG5cbiAgICBsZXQgc2NoZWR1bGVfcm9vbVxuICAgIHNjaGVkdWxlLl9lbWJlZGRlZCA/IHNjaGVkdWxlX3Jvb20gPSBzY2hlZHVsZS5fZW1iZWRkZWQucm9vbXNbMF0uYWJicmV2aWF0aW9uIDogc2NoZWR1bGVfcm9vbSA9ICdObyByb29tJ1xuXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgY29uc3QgY291cnNlbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgIGNvbnN0IHJvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBjb25zdCB0ZWFjaGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG5cbiAgICB0aW1lLnRleHRDb250ZW50ID0gc2NoZWR1bGVfdGltZVxuICAgIGNvdXJzZW5hbWUudGV4dENvbnRlbnQgPSBzY2hlZHVsZV9jb3Vyc2VuYW1lXG4gICAgcm9vbS50ZXh0Q29udGVudCA9IHNjaGVkdWxlX3Jvb21cbiAgICB0ZWFjaGVyLnRleHRDb250ZW50ID0gc2NoZWR1bGVfdGVhY2hlclxuXG4gICAgZGl2LmFwcGVuZCh0aW1lKVxuICAgIGRpdi5hcHBlbmQoY291cnNlbmFtZSlcbiAgICBkaXYuYXBwZW5kKHJvb20pXG4gICAgZGl2LmFwcGVuZCh0ZWFjaGVyKVxuXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3NjaGVkdWxlLWNvdXJzZScpXG5cbiAgICByZXR1cm4gZGl2XG59XG5cbmNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG59XG5cbi8vIERhdGFcbmZ1bmN0aW9uIGdldFNjaGVkdWxlcygpIHtcbiAgICByZXR1cm4gZmV0Y2goJy9zY2hlZHVsZScsIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxufSIsImNvbnN0IHNlYXJjaEJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtYmFyJylcbmNvbnN0IHNlYXJjaFJlc2V0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzZXQnKVxuXG5leHBvcnQgZnVuY3Rpb24gZm9jdXMoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNlYXJjaEJhci5mb2N1cygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93UmVzZXQoKSB7XG4gICAgc2VhcmNoUmVzZXRJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZVJlc2V0KCkge1xuICAgIGlmIChzZWFyY2hCYXIudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgc2VhcmNoUmVzZXRJY29uLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KGUpIHtcbiAgICBzZWFyY2hCYXIudmFsdWUgPSBcIlwiXG4gICAgZm9jdXMoZSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gZXhpc3RzKFsuLi52YXJpYWJsZXNdKSB7XG4gICAgY29uc3QgZXhpc3RzID0gdmFyaWFibGVzLmV2ZXJ5KHZhcmlhYmxlID0+IHZhcmlhYmxlICE9IG51bGwpXG4gICAgcmV0dXJuIGV4aXN0c1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2NhbFN0b3JhZ2UobmFtZSwgaXRlbSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIEpTT04uc3RyaW5naWZ5KGl0ZW0pKVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UoaXRlbSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGl0ZW0pKVxufVxuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7IC8vc291cmNlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1N0b3JhZ2VfQVBJL1VzaW5nX3RoZV9XZWJfU3RvcmFnZV9BUElcbiAgICBsZXQgc3RvcmFnZVxuICAgIHRyeSB7XG4gICAgICAgIHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV1cbiAgICAgICAgbGV0IHggPSAnX19zdG9yYWdlX3Rlc3RfXydcbiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHgsIHgpXG4gICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxuICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gMjIgfHxcbiAgICAgICAgICAgICAgICBlLmNvZGUgPT09IDEwMTQgfHxcbiAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InIHx8XG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSAmJlxuICAgICAgICAgICAgKHN0b3JhZ2UgJiYgc3RvcmFnZS5sZW5ndGggIT09IDApXG4gICAgfVxufSIsImltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL21vZHVsZXMvdXRpbHMubWpzJ1xuXG5leHBvcnQgeyB0ZW1wbGF0ZSBhcyBXQ191cmdlbnRBbm5vdW5jZW1lbnQgfVxuXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJylcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbjxzdHlsZT5cbiAgICBkaXYge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciA1MHB4O1xuICAgICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDUwcHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNFQ0U3RkE7XG4gICAgfVxuICAgIGRpdi5oaWRlIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAtOTk5OXB4O1xuICAgIH1cbiAgICBwIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDMwcHg7XG4gICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICAganVzdGlmeS1zZWxmOiBzdGFydDtcbiAgICB9XG4gICAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MjVweCkge1xuICAgICAgICBwIHtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbWcge1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICAgICAgICBncmlkLWNvbHVtbjogMiAvIDM7XG4gICAgICAgIGp1c3RpZnktc2VsZjogZW5kO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuPC9zdHlsZT5cbjxkaXYgY2xhc3M9XCJoaWRlXCI+XG4gICAgPHA+PC9wPlxuICAgIDxpbWcgc3JjPVwiLi9tZWRpYS9pY29ucy9ub3RpZmljYXRpb24tZXhpdC5zdmdcIiBhbHQ9XCJoaWRlIG5vdGlmaWNhdGlvblwiPlxuPC9kaXY+YFxuXG5cblxuY2xhc3MgdXJnZW50QW5ub3VuY2VtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKClcblxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdwJykudGV4dENvbnRlbnQgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbWVzc2FnZScpXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpXG4gICAgICAgICAgICB0aGlzLnN0b3JlKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsndWlkJ11cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPSBuZXdWYWx1ZSAmJiBuZXdWYWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCB1aWQgPSB0aGlzLmdldEF0dHJpYnV0ZSgndWlkJylcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEhpc3RvcnkgPSB1dGlscy5nZXRMb2NhbFN0b3JhZ2UoJ3JlYWQtaGlzdG9yeScpXG4gICAgICAgICAgICBpZiAoc3RvcmVkSGlzdG9yeSkge1xuICAgICAgICAgICAgICAgIGlmICghc3RvcmVkSGlzdG9yeS5pbmNsdWRlcyh1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudCgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKVxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVDb250ZW50KCkge1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcigncCcpLnRleHRDb250ZW50ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ21lc3NhZ2UnKVxuICAgIH1cblxuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdkaXYnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmNsYXNzTGlzdC5hZGQoJ3Nob3dzTm90aWZpY2F0aW9uJylcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignZGl2JykuY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93c05vdGlmaWNhdGlvbicpXG4gICAgfVxuXG4gICAgc3RvcmUoKSB7XG4gICAgICAgIGlmICh1dGlscy5zdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVkSGlzdG9yeSA9IHV0aWxzLmdldExvY2FsU3RvcmFnZSgncmVhZC1oaXN0b3J5JylcbiAgICAgICAgICAgIGNvbnN0IHJlYWRIaXN0b3J5ID0gc3RvcmVkSGlzdG9yeSA/IHN0b3JlZEhpc3RvcnkgOiBbXVxuXG4gICAgICAgICAgICByZWFkSGlzdG9yeS5wdXNoKHRoaXMuZ2V0QXR0cmlidXRlKCd1aWQnKSlcbiAgICAgICAgICAgIHV0aWxzLnNldExvY2FsU3RvcmFnZSgncmVhZC1oaXN0b3J5JywgcmVhZEhpc3RvcnkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3VyZ2VudC1hbm5vdW5jZW1lbnQnLCB1cmdlbnRBbm5vdW5jZW1lbnQpIl19"}