{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/modules/schedule.mjs","src/js/modules/search.mjs","src/js/modules/utils.mjs","src/js/web-components/urgent-announcement.mjs"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as utils from './modules/utils.mjs'\nimport * as search from './modules/search.mjs'\nimport scheduleHandler from './modules/schedule.mjs'\nimport urgentAnnouncement from './web-components/urgent-announcement.mjs'\n\nconst page = document.querySelector('main').id.toLowerCase()\n\n//init web-components\nconst template = urgentAnnouncement\n\n\n//init dashboard\nscheduleHandler()\n\n\n//urgent announcements\nconst socket = io()\n\n//subscribe to urgent-announcements\nsocket.emit('join', page)\n\n//on urgent-announcement hook update interface (see WC_urgentAnnouncement)\nsocket.on('urgent-announcement', announcement => {\n    const urgentAnnouncement = document.querySelector('urgent-announcement')\n\n    if (utils.exists([urgentAnnouncement])) {\n        urgentAnnouncement.setAttribute('message', announcement.title)\n        urgentAnnouncement.setAttribute('uid', announcement.newsItemId)\n    }\n})\n\n\n\n\n//menu \nconst menuIcon = document.getElementById('menu-icon')\nconst menu = document.getElementById('menu')\n\nif (utils.exists([menuIcon, menu])) {\n\n    //toggle menu (on mobile)\n    menuIcon.addEventListener('click', () => {\n        menu.classList.toggle('hide')\n    })\n}\n\n\n\n\n//search \nconst searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\nconst searchIcon = document.querySelector('#search-container input[type=submit]')\n\nif (utils.exists([searchBar, searchResetIcon, searchIcon])) {\n\n    //control search-reset icon \n    searchBar.addEventListener('focus', () => search.showReset())\n    searchBar.addEventListener('blur', () => search.hideReset())\n\n\n    //reset search input\n    searchResetIcon.addEventListener('click', e => search.reset(e))\n\n\n    //depending on search-query either give focus to searchbar or submit search-query\n    searchIcon.addEventListener('click', e => {\n        if (searchBar.value === \"\") {\n            search.focus(e)\n        }\n    })\n\n\n    //listen to keyboard input\n    document.addEventListener('keypress', e => {\n        switch (e.key) {\n            case \"/\":\n                search.focus(e) //give searchbar focus and hide search-reset icon\n                break\n        }\n    })\n}","const scheduleMaster = document.querySelector('#schedule')\nconst scheduleContainer = scheduleMaster.querySelector('#schedules-container')\nconst dateElement = scheduleMaster.querySelector('#navigator span')\nconst previousSchedule = scheduleMaster.querySelector('#navigator img:first-of-type')\nconst nextSchedule = scheduleMaster.querySelector('#navigator img:last-of-type')\n\nexport default function scheduleHandler() {\n    let scheduleIndex = 0\n    arrowHandler(scheduleIndex)\n\n    previousSchedule.addEventListener('click', () => {\n        scheduleIndex--\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n\n    nextSchedule.addEventListener('click', () => {\n        scheduleIndex++\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n}\n\n\n// Helpers\nfunction renderSchedules(scheduleIndex) {\n    getSchedules()\n        .then(schedules => {\n            const schedule = schedules[scheduleIndex]\n            const divs = schedule.schedules.map(schedule => createScheduleItem(schedule))\n\n            dateElement.textContent = `${schedule.day}-${schedule.month}-${schedule.year}`\n\n            scheduleContainer.textContent = ''\n            divs.forEach(div => scheduleContainer.append(div))\n        })\n}\n\nfunction arrowHandler(index) {\n    index === 0 ? previousSchedule.classList.add('disabled') : previousSchedule.classList.remove('disabled')\n    index === 4 ? nextSchedule.classList.add('disabled') : nextSchedule.classList.remove('disabled')\n}\n\nfunction createScheduleItem(schedule) {\n    const schedule_time = `${schedule.startDateTime.time} - ${schedule.endDateTime.time}`\n    const schedule_coursename = schedule._links.courses[0].title\n    const schedule_teacher = schedule._links.lecturers[0].title\n\n    let schedule_room\n    schedule._embedded ? schedule_room = schedule._embedded.rooms[0].abbreviation : schedule_room = 'No room'\n\n    const div = document.createElement('div')\n    const time = document.createElement('p')\n    const coursename = document.createElement('p')\n    const room = document.createElement('p')\n    const teacher = document.createElement('p')\n\n    time.textContent = schedule_time\n    coursename.textContent = schedule_coursename\n    room.textContent = schedule_room\n    teacher.textContent = schedule_teacher\n\n    div.append(time)\n    div.append(coursename)\n    div.append(room)\n    div.append(teacher)\n\n    div.classList.add('schedule-course')\n\n    return div\n}\n\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n}\n\n// Data\nfunction getSchedules() {\n    return fetch('/schedule', options)\n        .then(res => res.json())\n}","const searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\n\nexport function focus(e) {\n    e.preventDefault()\n    searchBar.focus()\n}\n\nexport function showReset() {\n    searchResetIcon.classList.remove('hide')\n}\n\nexport function hideReset() {\n    if (searchBar.value === \"\") {\n        searchResetIcon.classList.add('hide')\n    }\n}\n\nexport function reset(e) {\n    searchBar.value = \"\"\n    focus(e)\n}","export function exists([...variables]) {\n    const exists = variables.every(variable => variable != null)\n    return exists\n}\n\n\nexport function setLocalStorage(name, item) {\n    localStorage.setItem(name, JSON.stringify(item))\n}\n\n\nexport function getLocalStorage(item) {\n    return JSON.parse(localStorage.getItem(item))\n}\n\n\n\n\nexport function storageAvailable(type) { //source: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n    let storage\n    try {\n        storage = window[type]\n        let x = '__storage_test__'\n        storage.setItem(x, x)\n        storage.removeItem(x)\n        return true\n    } catch (e) {\n        return e instanceof DOMException && (\n                e.code === 22 ||\n                e.code === 1014 ||\n                e.name === 'QuotaExceededError' ||\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            (storage && storage.length !== 0)\n    }\n}","import * as utils from '../modules/utils.mjs'\n\nexport { template as WC_urgentAnnouncement }\n\nconst template = document.createElement('template')\ntemplate.innerHTML = `\n<style>\n    div {\n        display: grid;\n        grid-template-columns: 1fr 60px;\n        grid-template-rows: 40px;\n        align-items: center;\n    }\n    div.hide {\n        position: absolute;\n        left: -9999px;\n    }\n    p {\n        margin: 0;\n        padding-left: 30px;\n        color: black;\n        justify-self: start;\n    }\n    img {\n        padding-right: 20px;\n        grid-column: 2 / 3;\n        justify-self: end;\n        cursor: pointer;\n    }\n</style>\n<div class=\"hide\">\n    <p></p>\n    <img src=\"./media/icons/notification-exit.svg\" alt=\"hide notification\">\n</div>`\n\n\n\nclass urgentAnnouncement extends HTMLElement {\n\n    constructor() {\n        super()\n\n        this.attachShadow({ mode: 'open' })\n        this.shadowRoot.appendChild(template.content.cloneNode(true))\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n        this.shadowRoot.querySelector('img').addEventListener('click', () => {\n            this.hide()\n            this.store()\n        })\n    }\n\n    static get observedAttributes() {\n        return ['uid']\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue != newValue && newValue != \"\") {\n            const uid = this.getAttribute('uid')\n            const storedHistory = utils.getLocalStorage('read-history')\n            if (storedHistory) {\n                if (!storedHistory.includes(uid)) {\n                    this.updateContent()\n                    this.show()\n                }\n            } else {\n                this.updateContent()\n                this.show()\n            }\n        }\n    }\n\n    updateContent() {\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n    }\n\n    show() {\n        this.shadowRoot.querySelector('div').classList.remove('hide')\n    }\n\n    hide() {\n        this.shadowRoot.querySelector('div').classList.add('hide')\n    }\n\n    store() {\n        if (utils.storageAvailable('localStorage')) {\n            const storedHistory = utils.getLocalStorage('read-history')\n            const readHistory = storedHistory ? storedHistory : []\n\n            readHistory.push(this.getAttribute('uid'))\n            utils.setLocalStorage('read-history', readHistory)\n        }\n    }\n}\n\nwindow.customElements.define('urgent-announcement', urgentAnnouncement)"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvbW9kdWxlcy9zY2hlZHVsZS5tanMiLCJzcmMvanMvbW9kdWxlcy9zZWFyY2gubWpzIiwic3JjL2pzL21vZHVsZXMvdXRpbHMubWpzIiwic3JjL2pzL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLEVBQS9CLENBQWtDLFdBQWxDLEVBQWIsQyxDQUVBOztBQUNBLElBQU0sUUFBUSxHQUFHLDhCQUFqQixDLENBR0E7O0FBQ0EsNEIsQ0FHQTs7QUFDQSxJQUFNLE1BQU0sR0FBRyxFQUFFLEVBQWpCLEMsQ0FFQTs7QUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosRUFBb0IsSUFBcEIsRSxDQUVBOztBQUNBLE1BQU0sQ0FBQyxFQUFQLENBQVUscUJBQVYsRUFBaUMsVUFBQSxZQUFZLEVBQUk7QUFDN0MsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixxQkFBdkIsQ0FBM0I7O0FBRUEsTUFBSSxLQUFLLENBQUMsTUFBTixDQUFhLENBQUMsa0JBQUQsQ0FBYixDQUFKLEVBQXdDO0FBQ3BDLElBQUEsa0JBQWtCLENBQUMsWUFBbkIsQ0FBZ0MsU0FBaEMsRUFBMkMsWUFBWSxDQUFDLEtBQXhEO0FBQ0EsSUFBQSxrQkFBa0IsQ0FBQyxZQUFuQixDQUFnQyxLQUFoQyxFQUF1QyxZQUFZLENBQUMsVUFBcEQ7QUFDSDtBQUNKLENBUEQsRSxDQVlBOztBQUNBLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCLENBQWpCO0FBQ0EsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEIsQ0FBYjs7QUFFQSxJQUFJLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBQyxRQUFELEVBQVcsSUFBWCxDQUFiLENBQUosRUFBb0M7QUFFaEM7QUFDQSxFQUFBLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxZQUFNO0FBQ3JDLElBQUEsSUFBSSxDQUFDLFNBQUwsQ0FBZSxNQUFmLENBQXNCLE1BQXRCO0FBQ0gsR0FGRDtBQUdILEMsQ0FLRDs7O0FBQ0EsSUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBbEI7QUFDQSxJQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixjQUF4QixDQUF4QjtBQUNBLElBQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLHNDQUF2QixDQUFuQjs7QUFFQSxJQUFJLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBQyxTQUFELEVBQVksZUFBWixFQUE2QixVQUE3QixDQUFiLENBQUosRUFBNEQ7QUFFeEQ7QUFDQSxFQUFBLFNBQVMsQ0FBQyxnQkFBVixDQUEyQixPQUEzQixFQUFvQztBQUFBLFdBQU0sTUFBTSxDQUFDLFNBQVAsRUFBTjtBQUFBLEdBQXBDO0FBQ0EsRUFBQSxTQUFTLENBQUMsZ0JBQVYsQ0FBMkIsTUFBM0IsRUFBbUM7QUFBQSxXQUFNLE1BQU0sQ0FBQyxTQUFQLEVBQU47QUFBQSxHQUFuQyxFQUp3RCxDQU94RDs7QUFDQSxFQUFBLGVBQWUsQ0FBQyxnQkFBaEIsQ0FBaUMsT0FBakMsRUFBMEMsVUFBQSxDQUFDO0FBQUEsV0FBSSxNQUFNLENBQUMsS0FBUCxDQUFhLENBQWIsQ0FBSjtBQUFBLEdBQTNDLEVBUndELENBV3hEOztBQUNBLEVBQUEsVUFBVSxDQUFDLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLFVBQUEsQ0FBQyxFQUFJO0FBQ3RDLFFBQUksU0FBUyxDQUFDLEtBQVYsS0FBb0IsRUFBeEIsRUFBNEI7QUFDeEIsTUFBQSxNQUFNLENBQUMsS0FBUCxDQUFhLENBQWI7QUFDSDtBQUNKLEdBSkQsRUFad0QsQ0FtQnhEOztBQUNBLEVBQUEsUUFBUSxDQUFDLGdCQUFULENBQTBCLFVBQTFCLEVBQXNDLFVBQUEsQ0FBQyxFQUFJO0FBQ3ZDLFlBQVEsQ0FBQyxDQUFDLEdBQVY7QUFDSSxXQUFLLEdBQUw7QUFDSSxRQUFBLE1BQU0sQ0FBQyxLQUFQLENBQWEsQ0FBYixFQURKLENBQ29COztBQUNoQjtBQUhSO0FBS0gsR0FORDtBQU9IOzs7Ozs7Ozs7QUNqRkQsSUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsV0FBdkIsQ0FBdkI7QUFDQSxJQUFNLGlCQUFpQixHQUFHLGNBQWMsQ0FBQyxhQUFmLENBQTZCLHNCQUE3QixDQUExQjtBQUNBLElBQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxhQUFmLENBQTZCLGlCQUE3QixDQUFwQjtBQUNBLElBQU0sZ0JBQWdCLEdBQUcsY0FBYyxDQUFDLGFBQWYsQ0FBNkIsOEJBQTdCLENBQXpCO0FBQ0EsSUFBTSxZQUFZLEdBQUcsY0FBYyxDQUFDLGFBQWYsQ0FBNkIsNkJBQTdCLENBQXJCOztBQUVlLFNBQVMsZUFBVCxHQUEyQjtBQUN0QyxNQUFJLGFBQWEsR0FBRyxDQUFwQjtBQUNBLEVBQUEsWUFBWSxDQUFDLGFBQUQsQ0FBWjtBQUVBLEVBQUEsZ0JBQWdCLENBQUMsZ0JBQWpCLENBQWtDLE9BQWxDLEVBQTJDLFlBQU07QUFDN0MsSUFBQSxhQUFhO0FBQ2IsSUFBQSxZQUFZLENBQUMsYUFBRCxDQUFaO0FBQ0EsSUFBQSxlQUFlLENBQUMsYUFBRCxDQUFmO0FBQ0gsR0FKRDtBQU1BLEVBQUEsWUFBWSxDQUFDLGdCQUFiLENBQThCLE9BQTlCLEVBQXVDLFlBQU07QUFDekMsSUFBQSxhQUFhO0FBQ2IsSUFBQSxZQUFZLENBQUMsYUFBRCxDQUFaO0FBQ0EsSUFBQSxlQUFlLENBQUMsYUFBRCxDQUFmO0FBQ0gsR0FKRDtBQUtILEMsQ0FHRDs7O0FBQ0EsU0FBUyxlQUFULENBQXlCLGFBQXpCLEVBQXdDO0FBQ3BDLEVBQUEsWUFBWSxHQUNQLElBREwsQ0FDVSxVQUFBLFNBQVMsRUFBSTtBQUNmLFFBQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxhQUFELENBQTFCO0FBQ0EsUUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFNBQVQsQ0FBbUIsR0FBbkIsQ0FBdUIsVUFBQSxRQUFRO0FBQUEsYUFBSSxrQkFBa0IsQ0FBQyxRQUFELENBQXRCO0FBQUEsS0FBL0IsQ0FBYjtBQUVBLElBQUEsV0FBVyxDQUFDLFdBQVosYUFBNkIsUUFBUSxDQUFDLEdBQXRDLGNBQTZDLFFBQVEsQ0FBQyxLQUF0RCxjQUErRCxRQUFRLENBQUMsSUFBeEU7QUFFQSxJQUFBLGlCQUFpQixDQUFDLFdBQWxCLEdBQWdDLEVBQWhDO0FBQ0EsSUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLFVBQUEsR0FBRztBQUFBLGFBQUksaUJBQWlCLENBQUMsTUFBbEIsQ0FBeUIsR0FBekIsQ0FBSjtBQUFBLEtBQWhCO0FBQ0gsR0FUTDtBQVVIOztBQUVELFNBQVMsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUN6QixFQUFBLEtBQUssS0FBSyxDQUFWLEdBQWMsZ0JBQWdCLENBQUMsU0FBakIsQ0FBMkIsR0FBM0IsQ0FBK0IsVUFBL0IsQ0FBZCxHQUEyRCxnQkFBZ0IsQ0FBQyxTQUFqQixDQUEyQixNQUEzQixDQUFrQyxVQUFsQyxDQUEzRDtBQUNBLEVBQUEsS0FBSyxLQUFLLENBQVYsR0FBYyxZQUFZLENBQUMsU0FBYixDQUF1QixHQUF2QixDQUEyQixVQUEzQixDQUFkLEdBQXVELFlBQVksQ0FBQyxTQUFiLENBQXVCLE1BQXZCLENBQThCLFVBQTlCLENBQXZEO0FBQ0g7O0FBRUQsU0FBUyxrQkFBVCxDQUE0QixRQUE1QixFQUFzQztBQUNsQyxNQUFNLGFBQWEsYUFBTSxRQUFRLENBQUMsYUFBVCxDQUF1QixJQUE3QixnQkFBdUMsUUFBUSxDQUFDLFdBQVQsQ0FBcUIsSUFBNUQsQ0FBbkI7QUFDQSxNQUFNLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxNQUFULENBQWdCLE9BQWhCLENBQXdCLENBQXhCLEVBQTJCLEtBQXZEO0FBQ0EsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsTUFBVCxDQUFnQixTQUFoQixDQUEwQixDQUExQixFQUE2QixLQUF0RDtBQUVBLE1BQUksYUFBSjtBQUNBLEVBQUEsUUFBUSxDQUFDLFNBQVQsR0FBcUIsYUFBYSxHQUFHLFFBQVEsQ0FBQyxTQUFULENBQW1CLEtBQW5CLENBQXlCLENBQXpCLEVBQTRCLFlBQWpFLEdBQWdGLGFBQWEsR0FBRyxTQUFoRztBQUVBLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBQVo7QUFDQSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFiO0FBQ0EsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBbkI7QUFDQSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFiO0FBQ0EsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBaEI7QUFFQSxFQUFBLElBQUksQ0FBQyxXQUFMLEdBQW1CLGFBQW5CO0FBQ0EsRUFBQSxVQUFVLENBQUMsV0FBWCxHQUF5QixtQkFBekI7QUFDQSxFQUFBLElBQUksQ0FBQyxXQUFMLEdBQW1CLGFBQW5CO0FBQ0EsRUFBQSxPQUFPLENBQUMsV0FBUixHQUFzQixnQkFBdEI7QUFFQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsSUFBWDtBQUNBLEVBQUEsR0FBRyxDQUFDLE1BQUosQ0FBVyxVQUFYO0FBQ0EsRUFBQSxHQUFHLENBQUMsTUFBSixDQUFXLElBQVg7QUFDQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsT0FBWDtBQUVBLEVBQUEsR0FBRyxDQUFDLFNBQUosQ0FBYyxHQUFkLENBQWtCLGlCQUFsQjtBQUVBLFNBQU8sR0FBUDtBQUNIOztBQUVELElBQU0sT0FBTyxHQUFHO0FBQ1osRUFBQSxNQUFNLEVBQUUsS0FESTtBQUVaLEVBQUEsT0FBTyxFQUFFO0FBQ0wsb0JBQWdCO0FBRFg7QUFGRyxDQUFoQixDLENBT0E7O0FBQ0EsU0FBUyxZQUFULEdBQXdCO0FBQ3BCLFNBQU8sS0FBSyxDQUFDLFdBQUQsRUFBYyxPQUFkLENBQUwsQ0FDRixJQURFLENBQ0csVUFBQSxHQUFHO0FBQUEsV0FBSSxHQUFHLENBQUMsSUFBSixFQUFKO0FBQUEsR0FETixDQUFQO0FBRUg7Ozs7Ozs7Ozs7OztBQ25GRCxJQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixZQUF4QixDQUFsQjtBQUNBLElBQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLGNBQXhCLENBQXhCOztBQUVPLFNBQVMsS0FBVCxDQUFlLENBQWYsRUFBa0I7QUFDckIsRUFBQSxDQUFDLENBQUMsY0FBRjtBQUNBLEVBQUEsU0FBUyxDQUFDLEtBQVY7QUFDSDs7QUFFTSxTQUFTLFNBQVQsR0FBcUI7QUFDeEIsRUFBQSxlQUFlLENBQUMsU0FBaEIsQ0FBMEIsTUFBMUIsQ0FBaUMsTUFBakM7QUFDSDs7QUFFTSxTQUFTLFNBQVQsR0FBcUI7QUFDeEIsTUFBSSxTQUFTLENBQUMsS0FBVixLQUFvQixFQUF4QixFQUE0QjtBQUN4QixJQUFBLGVBQWUsQ0FBQyxTQUFoQixDQUEwQixHQUExQixDQUE4QixNQUE5QjtBQUNIO0FBQ0o7O0FBRU0sU0FBUyxLQUFULENBQWUsQ0FBZixFQUFrQjtBQUNyQixFQUFBLFNBQVMsQ0FBQyxLQUFWLEdBQWtCLEVBQWxCO0FBQ0EsRUFBQSxLQUFLLENBQUMsQ0FBRCxDQUFMO0FBQ0g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyQk0sU0FBUyxNQUFULE9BQWdDO0FBQUE7QUFBQSxNQUFaLFNBQVk7O0FBQ25DLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFWLENBQWdCLFVBQUEsUUFBUTtBQUFBLFdBQUksUUFBUSxJQUFJLElBQWhCO0FBQUEsR0FBeEIsQ0FBZjtBQUNBLFNBQU8sTUFBUDtBQUNIOztBQUdNLFNBQVMsZUFBVCxDQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQztBQUN4QyxFQUFBLFlBQVksQ0FBQyxPQUFiLENBQXFCLElBQXJCLEVBQTJCLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBZixDQUEzQjtBQUNIOztBQUdNLFNBQVMsZUFBVCxDQUF5QixJQUF6QixFQUErQjtBQUNsQyxTQUFPLElBQUksQ0FBQyxLQUFMLENBQVcsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsSUFBckIsQ0FBWCxDQUFQO0FBQ0g7O0FBS00sU0FBUyxnQkFBVCxDQUEwQixJQUExQixFQUFnQztBQUFFO0FBQ3JDLE1BQUksT0FBSjs7QUFDQSxNQUFJO0FBQ0EsSUFBQSxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUQsQ0FBaEI7QUFDQSxRQUFJLENBQUMsR0FBRyxrQkFBUjtBQUNBLElBQUEsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkI7QUFDQSxJQUFBLE9BQU8sQ0FBQyxVQUFSLENBQW1CLENBQW5CO0FBQ0EsV0FBTyxJQUFQO0FBQ0gsR0FORCxDQU1FLE9BQU8sQ0FBUCxFQUFVO0FBQ1IsV0FBTyxDQUFDLFlBQVksWUFBYixLQUNDLENBQUMsQ0FBQyxJQUFGLEtBQVcsRUFBWCxJQUNBLENBQUMsQ0FBQyxJQUFGLEtBQVcsSUFEWCxJQUVBLENBQUMsQ0FBQyxJQUFGLEtBQVcsb0JBRlgsSUFHQSxDQUFDLENBQUMsSUFBRixLQUFXLDRCQUpaLEtBS0YsT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLENBTG5DO0FBTUg7QUFDSjs7Ozs7Ozs7OztBQ2xDRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQSxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixVQUF2QixDQUFqQjs7QUFDQSxRQUFRLENBQUMsU0FBVDs7SUFnQ00sa0I7Ozs7O0FBRUYsZ0NBQWM7QUFBQTs7QUFBQTs7QUFDVjs7QUFFQSxVQUFLLFlBQUwsQ0FBa0I7QUFBRSxNQUFBLElBQUksRUFBRTtBQUFSLEtBQWxCOztBQUNBLFVBQUssVUFBTCxDQUFnQixXQUFoQixDQUE0QixRQUFRLENBQUMsT0FBVCxDQUFpQixTQUFqQixDQUEyQixJQUEzQixDQUE1Qjs7QUFDQSxVQUFLLFVBQUwsQ0FBZ0IsYUFBaEIsQ0FBOEIsR0FBOUIsRUFBbUMsV0FBbkMsR0FBaUQsTUFBSyxZQUFMLENBQWtCLFNBQWxCLENBQWpEOztBQUNBLFVBQUssVUFBTCxDQUFnQixhQUFoQixDQUE4QixLQUE5QixFQUFxQyxnQkFBckMsQ0FBc0QsT0FBdEQsRUFBK0QsWUFBTTtBQUNqRSxZQUFLLElBQUw7O0FBQ0EsWUFBSyxLQUFMO0FBQ0gsS0FIRDs7QUFOVTtBQVViOzs7OzZDQU13QixJLEVBQU0sUSxFQUFVLFEsRUFBVTtBQUMvQyxVQUFJLFFBQVEsSUFBSSxRQUFaLElBQXdCLFFBQVEsSUFBSSxFQUF4QyxFQUE0QztBQUN4QyxZQUFNLEdBQUcsR0FBRyxLQUFLLFlBQUwsQ0FBa0IsS0FBbEIsQ0FBWjtBQUNBLFlBQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxlQUFOLENBQXNCLGNBQXRCLENBQXRCOztBQUNBLFlBQUksYUFBSixFQUFtQjtBQUNmLGNBQUksQ0FBQyxhQUFhLENBQUMsUUFBZCxDQUF1QixHQUF2QixDQUFMLEVBQWtDO0FBQzlCLGlCQUFLLGFBQUw7QUFDQSxpQkFBSyxJQUFMO0FBQ0g7QUFDSixTQUxELE1BS087QUFDSCxlQUFLLGFBQUw7QUFDQSxlQUFLLElBQUw7QUFDSDtBQUNKO0FBQ0o7OztvQ0FFZTtBQUNaLFdBQUssVUFBTCxDQUFnQixhQUFoQixDQUE4QixHQUE5QixFQUFtQyxXQUFuQyxHQUFpRCxLQUFLLFlBQUwsQ0FBa0IsU0FBbEIsQ0FBakQ7QUFDSDs7OzJCQUVNO0FBQ0gsV0FBSyxVQUFMLENBQWdCLGFBQWhCLENBQThCLEtBQTlCLEVBQXFDLFNBQXJDLENBQStDLE1BQS9DLENBQXNELE1BQXREO0FBQ0g7OzsyQkFFTTtBQUNILFdBQUssVUFBTCxDQUFnQixhQUFoQixDQUE4QixLQUE5QixFQUFxQyxTQUFyQyxDQUErQyxHQUEvQyxDQUFtRCxNQUFuRDtBQUNIOzs7NEJBRU87QUFDSixVQUFJLEtBQUssQ0FBQyxnQkFBTixDQUF1QixjQUF2QixDQUFKLEVBQTRDO0FBQ3hDLFlBQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxlQUFOLENBQXNCLGNBQXRCLENBQXRCO0FBQ0EsWUFBTSxXQUFXLEdBQUcsYUFBYSxHQUFHLGFBQUgsR0FBbUIsRUFBcEQ7QUFFQSxRQUFBLFdBQVcsQ0FBQyxJQUFaLENBQWlCLEtBQUssWUFBTCxDQUFrQixLQUFsQixDQUFqQjtBQUNBLFFBQUEsS0FBSyxDQUFDLGVBQU4sQ0FBc0IsY0FBdEIsRUFBc0MsV0FBdEM7QUFDSDtBQUNKOzs7d0JBeEMrQjtBQUM1QixhQUFPLENBQUMsS0FBRCxDQUFQO0FBQ0g7Ozs7aUNBaEI0QixXOztBQXlEakMsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBdEIsQ0FBNkIscUJBQTdCLEVBQW9ELGtCQUFwRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vbW9kdWxlcy91dGlscy5tanMnXG5pbXBvcnQgKiBhcyBzZWFyY2ggZnJvbSAnLi9tb2R1bGVzL3NlYXJjaC5tanMnXG5pbXBvcnQgc2NoZWR1bGVIYW5kbGVyIGZyb20gJy4vbW9kdWxlcy9zY2hlZHVsZS5tanMnXG5pbXBvcnQgdXJnZW50QW5ub3VuY2VtZW50IGZyb20gJy4vd2ViLWNvbXBvbmVudHMvdXJnZW50LWFubm91bmNlbWVudC5tanMnXG5cbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuaWQudG9Mb3dlckNhc2UoKVxuXG4vL2luaXQgd2ViLWNvbXBvbmVudHNcbmNvbnN0IHRlbXBsYXRlID0gdXJnZW50QW5ub3VuY2VtZW50XG5cblxuLy9pbml0IGRhc2hib2FyZFxuc2NoZWR1bGVIYW5kbGVyKClcblxuXG4vL3VyZ2VudCBhbm5vdW5jZW1lbnRzXG5jb25zdCBzb2NrZXQgPSBpbygpXG5cbi8vc3Vic2NyaWJlIHRvIHVyZ2VudC1hbm5vdW5jZW1lbnRzXG5zb2NrZXQuZW1pdCgnam9pbicsIHBhZ2UpXG5cbi8vb24gdXJnZW50LWFubm91bmNlbWVudCBob29rIHVwZGF0ZSBpbnRlcmZhY2UgKHNlZSBXQ191cmdlbnRBbm5vdW5jZW1lbnQpXG5zb2NrZXQub24oJ3VyZ2VudC1hbm5vdW5jZW1lbnQnLCBhbm5vdW5jZW1lbnQgPT4ge1xuICAgIGNvbnN0IHVyZ2VudEFubm91bmNlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VyZ2VudC1hbm5vdW5jZW1lbnQnKVxuXG4gICAgaWYgKHV0aWxzLmV4aXN0cyhbdXJnZW50QW5ub3VuY2VtZW50XSkpIHtcbiAgICAgICAgdXJnZW50QW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgnbWVzc2FnZScsIGFubm91bmNlbWVudC50aXRsZSlcbiAgICAgICAgdXJnZW50QW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgndWlkJywgYW5ub3VuY2VtZW50Lm5ld3NJdGVtSWQpXG4gICAgfVxufSlcblxuXG5cblxuLy9tZW51IFxuY29uc3QgbWVudUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1pY29uJylcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpXG5cbmlmICh1dGlscy5leGlzdHMoW21lbnVJY29uLCBtZW51XSkpIHtcblxuICAgIC8vdG9nZ2xlIG1lbnUgKG9uIG1vYmlsZSlcbiAgICBtZW51SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJylcbiAgICB9KVxufVxuXG5cblxuXG4vL3NlYXJjaCBcbmNvbnN0IHNlYXJjaEJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtYmFyJylcbmNvbnN0IHNlYXJjaFJlc2V0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzZXQnKVxuY29uc3Qgc2VhcmNoSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gtY29udGFpbmVyIGlucHV0W3R5cGU9c3VibWl0XScpXG5cbmlmICh1dGlscy5leGlzdHMoW3NlYXJjaEJhciwgc2VhcmNoUmVzZXRJY29uLCBzZWFyY2hJY29uXSkpIHtcblxuICAgIC8vY29udHJvbCBzZWFyY2gtcmVzZXQgaWNvbiBcbiAgICBzZWFyY2hCYXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiBzZWFyY2guc2hvd1Jlc2V0KCkpXG4gICAgc2VhcmNoQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiBzZWFyY2guaGlkZVJlc2V0KCkpXG5cblxuICAgIC8vcmVzZXQgc2VhcmNoIGlucHV0XG4gICAgc2VhcmNoUmVzZXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBzZWFyY2gucmVzZXQoZSkpXG5cblxuICAgIC8vZGVwZW5kaW5nIG9uIHNlYXJjaC1xdWVyeSBlaXRoZXIgZ2l2ZSBmb2N1cyB0byBzZWFyY2hiYXIgb3Igc3VibWl0IHNlYXJjaC1xdWVyeVxuICAgIHNlYXJjaEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgaWYgKHNlYXJjaEJhci52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgc2VhcmNoLmZvY3VzKGUpXG4gICAgICAgIH1cbiAgICB9KVxuXG5cbiAgICAvL2xpc3RlbiB0byBrZXlib2FyZCBpbnB1dFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCIvXCI6XG4gICAgICAgICAgICAgICAgc2VhcmNoLmZvY3VzKGUpIC8vZ2l2ZSBzZWFyY2hiYXIgZm9jdXMgYW5kIGhpZGUgc2VhcmNoLXJlc2V0IGljb25cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfSlcbn0iLCJjb25zdCBzY2hlZHVsZU1hc3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzY2hlZHVsZScpXG5jb25zdCBzY2hlZHVsZUNvbnRhaW5lciA9IHNjaGVkdWxlTWFzdGVyLnF1ZXJ5U2VsZWN0b3IoJyNzY2hlZHVsZXMtY29udGFpbmVyJylcbmNvbnN0IGRhdGVFbGVtZW50ID0gc2NoZWR1bGVNYXN0ZXIucXVlcnlTZWxlY3RvcignI25hdmlnYXRvciBzcGFuJylcbmNvbnN0IHByZXZpb3VzU2NoZWR1bGUgPSBzY2hlZHVsZU1hc3Rlci5xdWVyeVNlbGVjdG9yKCcjbmF2aWdhdG9yIGltZzpmaXJzdC1vZi10eXBlJylcbmNvbnN0IG5leHRTY2hlZHVsZSA9IHNjaGVkdWxlTWFzdGVyLnF1ZXJ5U2VsZWN0b3IoJyNuYXZpZ2F0b3IgaW1nOmxhc3Qtb2YtdHlwZScpXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNjaGVkdWxlSGFuZGxlcigpIHtcbiAgICBsZXQgc2NoZWR1bGVJbmRleCA9IDBcbiAgICBhcnJvd0hhbmRsZXIoc2NoZWR1bGVJbmRleClcblxuICAgIHByZXZpb3VzU2NoZWR1bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNjaGVkdWxlSW5kZXgtLVxuICAgICAgICBhcnJvd0hhbmRsZXIoc2NoZWR1bGVJbmRleClcbiAgICAgICAgcmVuZGVyU2NoZWR1bGVzKHNjaGVkdWxlSW5kZXgpXG4gICAgfSlcblxuICAgIG5leHRTY2hlZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2NoZWR1bGVJbmRleCsrXG4gICAgICAgIGFycm93SGFuZGxlcihzY2hlZHVsZUluZGV4KVxuICAgICAgICByZW5kZXJTY2hlZHVsZXMoc2NoZWR1bGVJbmRleClcbiAgICB9KVxufVxuXG5cbi8vIEhlbHBlcnNcbmZ1bmN0aW9uIHJlbmRlclNjaGVkdWxlcyhzY2hlZHVsZUluZGV4KSB7XG4gICAgZ2V0U2NoZWR1bGVzKClcbiAgICAgICAgLnRoZW4oc2NoZWR1bGVzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVkdWxlID0gc2NoZWR1bGVzW3NjaGVkdWxlSW5kZXhdXG4gICAgICAgICAgICBjb25zdCBkaXZzID0gc2NoZWR1bGUuc2NoZWR1bGVzLm1hcChzY2hlZHVsZSA9PiBjcmVhdGVTY2hlZHVsZUl0ZW0oc2NoZWR1bGUpKVxuXG4gICAgICAgICAgICBkYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3NjaGVkdWxlLmRheX0tJHtzY2hlZHVsZS5tb250aH0tJHtzY2hlZHVsZS55ZWFyfWBcblxuICAgICAgICAgICAgc2NoZWR1bGVDb250YWluZXIudGV4dENvbnRlbnQgPSAnJ1xuICAgICAgICAgICAgZGl2cy5mb3JFYWNoKGRpdiA9PiBzY2hlZHVsZUNvbnRhaW5lci5hcHBlbmQoZGl2KSlcbiAgICAgICAgfSlcbn1cblxuZnVuY3Rpb24gYXJyb3dIYW5kbGVyKGluZGV4KSB7XG4gICAgaW5kZXggPT09IDAgPyBwcmV2aW91c1NjaGVkdWxlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJykgOiBwcmV2aW91c1NjaGVkdWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJylcbiAgICBpbmRleCA9PT0gNCA/IG5leHRTY2hlZHVsZS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpIDogbmV4dFNjaGVkdWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJylcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVJdGVtKHNjaGVkdWxlKSB7XG4gICAgY29uc3Qgc2NoZWR1bGVfdGltZSA9IGAke3NjaGVkdWxlLnN0YXJ0RGF0ZVRpbWUudGltZX0gLSAke3NjaGVkdWxlLmVuZERhdGVUaW1lLnRpbWV9YFxuICAgIGNvbnN0IHNjaGVkdWxlX2NvdXJzZW5hbWUgPSBzY2hlZHVsZS5fbGlua3MuY291cnNlc1swXS50aXRsZVxuICAgIGNvbnN0IHNjaGVkdWxlX3RlYWNoZXIgPSBzY2hlZHVsZS5fbGlua3MubGVjdHVyZXJzWzBdLnRpdGxlXG5cbiAgICBsZXQgc2NoZWR1bGVfcm9vbVxuICAgIHNjaGVkdWxlLl9lbWJlZGRlZCA/IHNjaGVkdWxlX3Jvb20gPSBzY2hlZHVsZS5fZW1iZWRkZWQucm9vbXNbMF0uYWJicmV2aWF0aW9uIDogc2NoZWR1bGVfcm9vbSA9ICdObyByb29tJ1xuXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgY29uc3QgY291cnNlbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgIGNvbnN0IHJvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBjb25zdCB0ZWFjaGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG5cbiAgICB0aW1lLnRleHRDb250ZW50ID0gc2NoZWR1bGVfdGltZVxuICAgIGNvdXJzZW5hbWUudGV4dENvbnRlbnQgPSBzY2hlZHVsZV9jb3Vyc2VuYW1lXG4gICAgcm9vbS50ZXh0Q29udGVudCA9IHNjaGVkdWxlX3Jvb21cbiAgICB0ZWFjaGVyLnRleHRDb250ZW50ID0gc2NoZWR1bGVfdGVhY2hlclxuXG4gICAgZGl2LmFwcGVuZCh0aW1lKVxuICAgIGRpdi5hcHBlbmQoY291cnNlbmFtZSlcbiAgICBkaXYuYXBwZW5kKHJvb20pXG4gICAgZGl2LmFwcGVuZCh0ZWFjaGVyKVxuXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3NjaGVkdWxlLWNvdXJzZScpXG5cbiAgICByZXR1cm4gZGl2XG59XG5cbmNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG59XG5cbi8vIERhdGFcbmZ1bmN0aW9uIGdldFNjaGVkdWxlcygpIHtcbiAgICByZXR1cm4gZmV0Y2goJy9zY2hlZHVsZScsIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxufSIsImNvbnN0IHNlYXJjaEJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtYmFyJylcbmNvbnN0IHNlYXJjaFJlc2V0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzZXQnKVxuXG5leHBvcnQgZnVuY3Rpb24gZm9jdXMoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNlYXJjaEJhci5mb2N1cygpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93UmVzZXQoKSB7XG4gICAgc2VhcmNoUmVzZXRJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZVJlc2V0KCkge1xuICAgIGlmIChzZWFyY2hCYXIudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgc2VhcmNoUmVzZXRJY29uLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KGUpIHtcbiAgICBzZWFyY2hCYXIudmFsdWUgPSBcIlwiXG4gICAgZm9jdXMoZSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gZXhpc3RzKFsuLi52YXJpYWJsZXNdKSB7XG4gICAgY29uc3QgZXhpc3RzID0gdmFyaWFibGVzLmV2ZXJ5KHZhcmlhYmxlID0+IHZhcmlhYmxlICE9IG51bGwpXG4gICAgcmV0dXJuIGV4aXN0c1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2NhbFN0b3JhZ2UobmFtZSwgaXRlbSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIEpTT04uc3RyaW5naWZ5KGl0ZW0pKVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UoaXRlbSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGl0ZW0pKVxufVxuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7IC8vc291cmNlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1N0b3JhZ2VfQVBJL1VzaW5nX3RoZV9XZWJfU3RvcmFnZV9BUElcbiAgICBsZXQgc3RvcmFnZVxuICAgIHRyeSB7XG4gICAgICAgIHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV1cbiAgICAgICAgbGV0IHggPSAnX19zdG9yYWdlX3Rlc3RfXydcbiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHgsIHgpXG4gICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxuICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gMjIgfHxcbiAgICAgICAgICAgICAgICBlLmNvZGUgPT09IDEwMTQgfHxcbiAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InIHx8XG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSAmJlxuICAgICAgICAgICAgKHN0b3JhZ2UgJiYgc3RvcmFnZS5sZW5ndGggIT09IDApXG4gICAgfVxufSIsImltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL21vZHVsZXMvdXRpbHMubWpzJ1xuXG5leHBvcnQgeyB0ZW1wbGF0ZSBhcyBXQ191cmdlbnRBbm5vdW5jZW1lbnQgfVxuXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJylcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbjxzdHlsZT5cbiAgICBkaXYge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciA2MHB4O1xuICAgICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDQwcHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxuICAgIGRpdi5oaWRlIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAtOTk5OXB4O1xuICAgIH1cbiAgICBwIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDMwcHg7XG4gICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICAganVzdGlmeS1zZWxmOiBzdGFydDtcbiAgICB9XG4gICAgaW1nIHtcbiAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICAgICAgZ3JpZC1jb2x1bW46IDIgLyAzO1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbjwvc3R5bGU+XG48ZGl2IGNsYXNzPVwiaGlkZVwiPlxuICAgIDxwPjwvcD5cbiAgICA8aW1nIHNyYz1cIi4vbWVkaWEvaWNvbnMvbm90aWZpY2F0aW9uLWV4aXQuc3ZnXCIgYWx0PVwiaGlkZSBub3RpZmljYXRpb25cIj5cbjwvZGl2PmBcblxuXG5cbmNsYXNzIHVyZ2VudEFubm91bmNlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSlcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcigncCcpLnRleHRDb250ZW50ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ21lc3NhZ2UnKVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignaW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKVxuICAgICAgICAgICAgdGhpcy5zdG9yZSgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbJ3VpZCddXG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAob2xkVmFsdWUgIT0gbmV3VmFsdWUgJiYgbmV3VmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgY29uc3QgdWlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3VpZCcpXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRIaXN0b3J5ID0gdXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCdyZWFkLWhpc3RvcnknKVxuICAgICAgICAgICAgaWYgKHN0b3JlZEhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlZEhpc3RvcnkuaW5jbHVkZXModWlkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3coKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KClcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlQ29udGVudCgpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ3AnKS50ZXh0Q29udGVudCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdtZXNzYWdlJylcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignZGl2JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cblxuICAgIHN0b3JlKCkge1xuICAgICAgICBpZiAodXRpbHMuc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEhpc3RvcnkgPSB1dGlscy5nZXRMb2NhbFN0b3JhZ2UoJ3JlYWQtaGlzdG9yeScpXG4gICAgICAgICAgICBjb25zdCByZWFkSGlzdG9yeSA9IHN0b3JlZEhpc3RvcnkgPyBzdG9yZWRIaXN0b3J5IDogW11cblxuICAgICAgICAgICAgcmVhZEhpc3RvcnkucHVzaCh0aGlzLmdldEF0dHJpYnV0ZSgndWlkJykpXG4gICAgICAgICAgICB1dGlscy5zZXRMb2NhbFN0b3JhZ2UoJ3JlYWQtaGlzdG9yeScsIHJlYWRIaXN0b3J5KVxuICAgICAgICB9XG4gICAgfVxufVxuXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd1cmdlbnQtYW5ub3VuY2VtZW50JywgdXJnZW50QW5ub3VuY2VtZW50KSJdfQ=="}