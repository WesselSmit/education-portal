{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/modules/schedule.mjs","src/js/modules/search.mjs","src/js/modules/utils.mjs","src/js/web-components/urgent-announcement.mjs"],"names":[],"mappings":"AAAA;;;;;ACAA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,EAA/B,CAAkC,WAAlC,EAAb,C,CAEA;;AACA,IAAM,QAAQ,GAAG,8BAAjB,C,CAGA;;AACA,4B,CAGA;;AACA,IAAM,MAAM,GAAG,EAAE,EAAjB,C,CAEA;;AACA,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,IAApB,E,CAEA;;AACA,MAAM,CAAC,EAAP,CAAU,qBAAV,EAAiC,UAAA,YAAY,EAAI;AAC7C,MAAM,kBAAkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,qBAAvB,CAA3B;;AAEA,MAAI,KAAK,CAAC,MAAN,CAAa,CAAC,kBAAD,CAAb,CAAJ,EAAwC;AACpC,IAAA,kBAAkB,CAAC,YAAnB,CAAgC,SAAhC,EAA2C,YAAY,CAAC,KAAxD;AACA,IAAA,kBAAkB,CAAC,YAAnB,CAAgC,KAAhC,EAAuC,YAAY,CAAC,UAApD;AACH;AACJ,CAPD,E,CAYA;;AACA,IAAM,QAAQ,GAAG,QAAQ,CAAC,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAb;;AAEA,IAAI,KAAK,CAAC,MAAN,CAAa,CAAC,QAAD,EAAW,IAAX,CAAb,CAAJ,EAAoC;AAEhC;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACrC,IAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,MAAtB;AACH,GAFD;AAGH,C,CAKD;;;AACA,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAM,eAAe,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAxB;AACA,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,sCAAvB,CAAnB;;AAEA,IAAI,KAAK,CAAC,MAAN,CAAa,CAAC,SAAD,EAAY,eAAZ,EAA6B,UAA7B,CAAb,CAAJ,EAA4D;AAExD;AACA,EAAA,SAAS,CAAC,gBAAV,CAA2B,OAA3B,EAAoC;AAAA,WAAM,MAAM,CAAC,SAAP,EAAN;AAAA,GAApC;AACA,EAAA,SAAS,CAAC,gBAAV,CAA2B,MAA3B,EAAmC;AAAA,WAAM,MAAM,CAAC,SAAP,EAAN;AAAA,GAAnC,EAJwD,CAOxD;;AACA,EAAA,eAAe,CAAC,gBAAhB,CAAiC,OAAjC,EAA0C,UAAA,CAAC;AAAA,WAAI,MAAM,CAAC,KAAP,CAAa,CAAb,CAAJ;AAAA,GAA3C,EARwD,CAWxD;;AACA,EAAA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,UAAA,CAAC,EAAI;AACtC,QAAI,SAAS,CAAC,KAAV,KAAoB,EAAxB,EAA4B;AACxB,MAAA,MAAM,CAAC,KAAP,CAAa,CAAb;AACH;AACJ,GAJD,EAZwD,CAmBxD;;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,UAA1B,EAAsC,UAAA,CAAC,EAAI;AACvC,YAAQ,CAAC,CAAC,GAAV;AACI,WAAK,GAAL;AACI,QAAA,MAAM,CAAC,KAAP,CAAa,CAAb,EADJ,CACoB;;AAChB;AAHR;AAKH,GAND;AAOH;;;;;;;;;ACjFD,IAAM,cAAc,GAAG,QAAQ,CAAC,aAAT,CAAuB,WAAvB,CAAvB;AACA,IAAM,iBAAiB,GAAG,cAAc,CAAC,aAAf,CAA6B,sBAA7B,CAA1B;AACA,IAAM,WAAW,GAAG,cAAc,CAAC,aAAf,CAA6B,iBAA7B,CAApB;AACA,IAAM,gBAAgB,GAAG,cAAc,CAAC,aAAf,CAA6B,8BAA7B,CAAzB;AACA,IAAM,YAAY,GAAG,cAAc,CAAC,aAAf,CAA6B,6BAA7B,CAArB;;AAEe,SAAS,eAAT,GAA2B;AACtC,MAAI,aAAa,GAAG,CAApB;AACA,EAAA,YAAY,CAAC,aAAD,CAAZ;AAEA,EAAA,gBAAgB,CAAC,gBAAjB,CAAkC,OAAlC,EAA2C,YAAM;AAC7C,IAAA,aAAa;AACb,IAAA,YAAY,CAAC,aAAD,CAAZ;AACA,IAAA,eAAe,CAAC,aAAD,CAAf;AACH,GAJD;AAMA,EAAA,YAAY,CAAC,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AACzC,IAAA,aAAa;AACb,IAAA,YAAY,CAAC,aAAD,CAAZ;AACA,IAAA,eAAe,CAAC,aAAD,CAAf;AACH,GAJD;AAKH,C,CAGD;;;AACA,SAAS,eAAT,CAAyB,aAAzB,EAAwC;AACpC,EAAA,YAAY,GACP,IADL,CACU,UAAA,SAAS,EAAI;AACf,QAAM,QAAQ,GAAG,SAAS,CAAC,aAAD,CAA1B;AACA,QAAM,IAAI,GAAG,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,UAAA,QAAQ;AAAA,aAAI,kBAAkB,CAAC,QAAD,CAAtB;AAAA,KAA/B,CAAb;AAEA,IAAA,WAAW,CAAC,WAAZ,aAA6B,QAAQ,CAAC,GAAtC,cAA6C,QAAQ,CAAC,KAAtD,cAA+D,QAAQ,CAAC,IAAxE;AAEA,IAAA,iBAAiB,CAAC,WAAlB,GAAgC,EAAhC;AACA,IAAA,IAAI,CAAC,OAAL,CAAa,UAAA,GAAG;AAAA,aAAI,iBAAiB,CAAC,MAAlB,CAAyB,GAAzB,CAAJ;AAAA,KAAhB;AACH,GATL;AAUH;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAA6B;AACzB,EAAA,KAAK,KAAK,CAAV,GAAc,gBAAgB,CAAC,SAAjB,CAA2B,GAA3B,CAA+B,UAA/B,CAAd,GAA2D,gBAAgB,CAAC,SAAjB,CAA2B,MAA3B,CAAkC,UAAlC,CAA3D;AACA,EAAA,KAAK,KAAK,CAAV,GAAc,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,UAA3B,CAAd,GAAuD,YAAY,CAAC,SAAb,CAAuB,MAAvB,CAA8B,UAA9B,CAAvD;AACH;;AAED,SAAS,kBAAT,CAA4B,QAA5B,EAAsC;AAClC,MAAM,aAAa,aAAM,QAAQ,CAAC,aAAT,CAAuB,IAA7B,gBAAuC,QAAQ,CAAC,WAAT,CAAqB,IAA5D,CAAnB;AACA,MAAM,mBAAmB,GAAG,QAAQ,CAAC,MAAT,CAAgB,OAAhB,CAAwB,CAAxB,EAA2B,KAAvD;AACA,MAAM,gBAAgB,GAAG,QAAQ,CAAC,MAAT,CAAgB,SAAhB,CAA0B,CAA1B,EAA6B,KAAtD;AAEA,MAAI,aAAJ;AACA,EAAA,QAAQ,CAAC,SAAT,GAAqB,aAAa,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAyB,CAAzB,EAA4B,YAAjE,GAAgF,aAAa,GAAG,SAAhG;AAEA,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAb;AACA,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAnB;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAb;AACA,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAhB;AAEA,EAAA,IAAI,CAAC,WAAL,GAAmB,aAAnB;AACA,EAAA,UAAU,CAAC,WAAX,GAAyB,mBAAzB;AACA,EAAA,IAAI,CAAC,WAAL,GAAmB,aAAnB;AACA,EAAA,OAAO,CAAC,WAAR,GAAsB,gBAAtB;AAEA,EAAA,GAAG,CAAC,MAAJ,CAAW,IAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,UAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,IAAX;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,OAAX;AAEA,EAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,iBAAlB;AAEA,SAAO,GAAP;AACH;;AAED,IAAM,OAAO,GAAG;AACZ,EAAA,MAAM,EAAE,KADI;AAEZ,EAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAFG,CAAhB,C,CAOA;;AACA,SAAS,YAAT,GAAwB;AACpB,SAAO,KAAK,CAAC,WAAD,EAAc,OAAd,CAAL,CACF,IADE,CACG,UAAA,GAAG;AAAA,WAAI,GAAG,CAAC,IAAJ,EAAJ;AAAA,GADN,CAAP;AAEH;;;;;;;;;;;;ACnFD,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAM,eAAe,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAxB;;AAEO,SAAS,KAAT,CAAe,CAAf,EAAkB;AACrB,EAAA,CAAC,CAAC,cAAF;AACA,EAAA,SAAS,CAAC,KAAV;AACH;;AAEM,SAAS,SAAT,GAAqB;AACxB,EAAA,eAAe,CAAC,SAAhB,CAA0B,MAA1B,CAAiC,MAAjC;AACH;;AAEM,SAAS,SAAT,GAAqB;AACxB,MAAI,SAAS,CAAC,KAAV,KAAoB,EAAxB,EAA4B;AACxB,IAAA,eAAe,CAAC,SAAhB,CAA0B,GAA1B,CAA8B,MAA9B;AACH;AACJ;;AAEM,SAAS,KAAT,CAAe,CAAf,EAAkB;AACrB,EAAA,SAAS,CAAC,KAAV,GAAkB,EAAlB;AACA,EAAA,KAAK,CAAC,CAAD,CAAL;AACH;;;;;;;;;;;;;;;;;;;;;;;;;ACrBM,SAAS,MAAT,OAAgC;AAAA;AAAA,MAAZ,SAAY;;AACnC,MAAM,MAAM,GAAG,SAAS,CAAC,KAAV,CAAgB,UAAA,QAAQ;AAAA,WAAI,QAAQ,IAAI,IAAhB;AAAA,GAAxB,CAAf;AACA,SAAO,MAAP;AACH;;AAGM,SAAS,eAAT,CAAyB,IAAzB,EAA+B,IAA/B,EAAqC;AACxC,EAAA,YAAY,CAAC,OAAb,CAAqB,IAArB,EAA2B,IAAI,CAAC,SAAL,CAAe,IAAf,CAA3B;AACH;;AAGM,SAAS,eAAT,CAAyB,IAAzB,EAA+B;AAClC,SAAO,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,IAArB,CAAX,CAAP;AACH;;AAKM,SAAS,gBAAT,CAA0B,IAA1B,EAAgC;AAAE;AACrC,MAAI,OAAJ;;AACA,MAAI;AACA,IAAA,OAAO,GAAG,MAAM,CAAC,IAAD,CAAhB;AACA,QAAI,CAAC,GAAG,kBAAR;AACA,IAAA,OAAO,CAAC,OAAR,CAAgB,CAAhB,EAAmB,CAAnB;AACA,IAAA,OAAO,CAAC,UAAR,CAAmB,CAAnB;AACA,WAAO,IAAP;AACH,GAND,CAME,OAAO,CAAP,EAAU;AACR,WAAO,CAAC,YAAY,YAAb,KACC,CAAC,CAAC,IAAF,KAAW,EAAX,IACA,CAAC,CAAC,IAAF,KAAW,IADX,IAEA,CAAC,CAAC,IAAF,KAAW,oBAFX,IAGA,CAAC,CAAC,IAAF,KAAW,4BAJZ,KAKF,OAAO,IAAI,OAAO,CAAC,MAAR,KAAmB,CALnC;AAMH;AACJ;;;;;;;;;;AClCD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAjB;;AACA,QAAQ,CAAC,SAAT;;IAsCM,kB;;;;;AAEF,gCAAc;AAAA;;AAAA;;AACV;;AAEA,UAAK,YAAL,CAAkB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAlB;;AACA,UAAK,UAAL,CAAgB,WAAhB,CAA4B,QAAQ,CAAC,OAAT,CAAiB,SAAjB,CAA2B,IAA3B,CAA5B;;AACA,UAAK,UAAL,CAAgB,aAAhB,CAA8B,GAA9B,EAAmC,WAAnC,GAAiD,MAAK,YAAL,CAAkB,SAAlB,CAAjD;;AACA,UAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,gBAArC,CAAsD,OAAtD,EAA+D,YAAM;AACjE,YAAK,IAAL;;AACA,YAAK,KAAL;AACH,KAHD;;AANU;AAUb;;;;6CAMwB,I,EAAM,Q,EAAU,Q,EAAU;AAC/C,UAAI,QAAQ,IAAI,QAAZ,IAAwB,QAAQ,IAAI,EAAxC,EAA4C;AACxC,YAAM,GAAG,GAAG,KAAK,YAAL,CAAkB,KAAlB,CAAZ;AACA,YAAM,aAAa,GAAG,KAAK,CAAC,eAAN,CAAsB,cAAtB,CAAtB;;AACA,YAAI,aAAJ,EAAmB;AACf,cAAI,CAAC,aAAa,CAAC,QAAd,CAAuB,GAAvB,CAAL,EAAkC;AAC9B,iBAAK,aAAL;AACA,iBAAK,IAAL;AACH;AACJ,SALD,MAKO;AACH,eAAK,aAAL;AACA,eAAK,IAAL;AACH;AACJ;AACJ;;;oCAEe;AACZ,WAAK,UAAL,CAAgB,aAAhB,CAA8B,GAA9B,EAAmC,WAAnC,GAAiD,KAAK,YAAL,CAAkB,SAAlB,CAAjD;AACH;;;2BAEM;AACH,WAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,SAArC,CAA+C,MAA/C,CAAsD,MAAtD;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,SAA/B,CAAyC,GAAzC,CAA6C,mBAA7C;AACH;;;2BAEM;AACH,WAAK,UAAL,CAAgB,aAAhB,CAA8B,KAA9B,EAAqC,SAArC,CAA+C,GAA/C,CAAmD,MAAnD;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,SAA/B,CAAyC,MAAzC,CAAgD,mBAAhD;AACH;;;4BAEO;AACJ,UAAI,KAAK,CAAC,gBAAN,CAAuB,cAAvB,CAAJ,EAA4C;AACxC,YAAM,aAAa,GAAG,KAAK,CAAC,eAAN,CAAsB,cAAtB,CAAtB;AACA,YAAM,WAAW,GAAG,aAAa,GAAG,aAAH,GAAmB,EAApD;AAEA,QAAA,WAAW,CAAC,IAAZ,CAAiB,KAAK,YAAL,CAAkB,KAAlB,CAAjB;AACA,QAAA,KAAK,CAAC,eAAN,CAAsB,cAAtB,EAAsC,WAAtC;AACH;AACJ;;;wBA1C+B;AAC5B,aAAO,CAAC,KAAD,CAAP;AACH;;;;iCAhB4B,W;;AA2DjC,MAAM,CAAC,cAAP,CAAsB,MAAtB,CAA6B,qBAA7B,EAAoD,kBAApD","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as utils from './modules/utils.mjs'\nimport * as search from './modules/search.mjs'\nimport scheduleHandler from './modules/schedule.mjs'\nimport urgentAnnouncement from './web-components/urgent-announcement.mjs'\n\nconst page = document.querySelector('main').id.toLowerCase()\n\n//init web-components\nconst template = urgentAnnouncement\n\n\n//init dashboard\nscheduleHandler()\n\n\n//urgent announcements\nconst socket = io()\n\n//subscribe to urgent-announcements\nsocket.emit('join', page)\n\n//on urgent-announcement hook update interface (see WC_urgentAnnouncement)\nsocket.on('urgent-announcement', announcement => {\n    const urgentAnnouncement = document.querySelector('urgent-announcement')\n\n    if (utils.exists([urgentAnnouncement])) {\n        urgentAnnouncement.setAttribute('message', announcement.title)\n        urgentAnnouncement.setAttribute('uid', announcement.newsItemId)\n    }\n})\n\n\n\n\n//menu \nconst menuIcon = document.getElementById('menu-icon')\nconst menu = document.getElementById('menu')\n\nif (utils.exists([menuIcon, menu])) {\n\n    //toggle menu (on mobile)\n    menuIcon.addEventListener('click', () => {\n        menu.classList.toggle('hide')\n    })\n}\n\n\n\n\n//search \nconst searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\nconst searchIcon = document.querySelector('#search-container input[type=submit]')\n\nif (utils.exists([searchBar, searchResetIcon, searchIcon])) {\n\n    //control search-reset icon \n    searchBar.addEventListener('focus', () => search.showReset())\n    searchBar.addEventListener('blur', () => search.hideReset())\n\n\n    //reset search input\n    searchResetIcon.addEventListener('click', e => search.reset(e))\n\n\n    //depending on search-query either give focus to searchbar or submit search-query\n    searchIcon.addEventListener('click', e => {\n        if (searchBar.value === \"\") {\n            search.focus(e)\n        }\n    })\n\n\n    //listen to keyboard input\n    document.addEventListener('keypress', e => {\n        switch (e.key) {\n            case \"/\":\n                search.focus(e) //give searchbar focus and hide search-reset icon\n                break\n        }\n    })\n}","const scheduleMaster = document.querySelector('#schedule')\nconst scheduleContainer = scheduleMaster.querySelector('#schedules-container')\nconst dateElement = scheduleMaster.querySelector('#navigator span')\nconst previousSchedule = scheduleMaster.querySelector('#navigator img:first-of-type')\nconst nextSchedule = scheduleMaster.querySelector('#navigator img:last-of-type')\n\nexport default function scheduleHandler() {\n    let scheduleIndex = 0\n    arrowHandler(scheduleIndex)\n\n    previousSchedule.addEventListener('click', () => {\n        scheduleIndex--\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n\n    nextSchedule.addEventListener('click', () => {\n        scheduleIndex++\n        arrowHandler(scheduleIndex)\n        renderSchedules(scheduleIndex)\n    })\n}\n\n\n// Helpers\nfunction renderSchedules(scheduleIndex) {\n    getSchedules()\n        .then(schedules => {\n            const schedule = schedules[scheduleIndex]\n            const divs = schedule.schedules.map(schedule => createScheduleItem(schedule))\n\n            dateElement.textContent = `${schedule.day}-${schedule.month}-${schedule.year}`\n\n            scheduleContainer.textContent = ''\n            divs.forEach(div => scheduleContainer.append(div))\n        })\n}\n\nfunction arrowHandler(index) {\n    index === 0 ? previousSchedule.classList.add('disabled') : previousSchedule.classList.remove('disabled')\n    index === 4 ? nextSchedule.classList.add('disabled') : nextSchedule.classList.remove('disabled')\n}\n\nfunction createScheduleItem(schedule) {\n    const schedule_time = `${schedule.startDateTime.time} - ${schedule.endDateTime.time}`\n    const schedule_coursename = schedule._links.courses[0].title\n    const schedule_teacher = schedule._links.lecturers[0].title\n\n    let schedule_room\n    schedule._embedded ? schedule_room = schedule._embedded.rooms[0].abbreviation : schedule_room = 'No room'\n\n    const div = document.createElement('div')\n    const time = document.createElement('p')\n    const coursename = document.createElement('p')\n    const room = document.createElement('p')\n    const teacher = document.createElement('p')\n\n    time.textContent = schedule_time\n    coursename.textContent = schedule_coursename\n    room.textContent = schedule_room\n    teacher.textContent = schedule_teacher\n\n    div.append(time)\n    div.append(coursename)\n    div.append(room)\n    div.append(teacher)\n\n    div.classList.add('schedule-course')\n\n    return div\n}\n\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n}\n\n// Data\nfunction getSchedules() {\n    return fetch('/schedule', options)\n        .then(res => res.json())\n}","const searchBar = document.getElementById('search-bar')\nconst searchResetIcon = document.getElementById('search-reset')\n\nexport function focus(e) {\n    e.preventDefault()\n    searchBar.focus()\n}\n\nexport function showReset() {\n    searchResetIcon.classList.remove('hide')\n}\n\nexport function hideReset() {\n    if (searchBar.value === \"\") {\n        searchResetIcon.classList.add('hide')\n    }\n}\n\nexport function reset(e) {\n    searchBar.value = \"\"\n    focus(e)\n}","export function exists([...variables]) {\n    const exists = variables.every(variable => variable != null)\n    return exists\n}\n\n\nexport function setLocalStorage(name, item) {\n    localStorage.setItem(name, JSON.stringify(item))\n}\n\n\nexport function getLocalStorage(item) {\n    return JSON.parse(localStorage.getItem(item))\n}\n\n\n\n\nexport function storageAvailable(type) { //source: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n    let storage\n    try {\n        storage = window[type]\n        let x = '__storage_test__'\n        storage.setItem(x, x)\n        storage.removeItem(x)\n        return true\n    } catch (e) {\n        return e instanceof DOMException && (\n                e.code === 22 ||\n                e.code === 1014 ||\n                e.name === 'QuotaExceededError' ||\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            (storage && storage.length !== 0)\n    }\n}","import * as utils from '../modules/utils.mjs'\n\nexport { template as WC_urgentAnnouncement }\n\nconst template = document.createElement('template')\ntemplate.innerHTML = `\n<style>\n    div {\n        display: grid;\n        grid-template-columns: 1fr 50px;\n        grid-template-rows: 50px;\n        align-items: center;\n        background-color: #ECE7FA;\n    }\n    div.hide {\n        position: absolute;\n        left: -9999px;\n    }\n    p {\n        margin: 0;\n        padding-left: 30px;\n        color: black;\n        justify-self: start;\n    }\n    @media only screen and (max-width: 425px) {\n        p {\n            padding-left: 10px;\n        }\n    }\n    img {\n        padding-right: 20px;\n        grid-column: 2 / 3;\n        justify-self: end;\n        cursor: pointer;\n    }\n</style>\n<div class=\"hide\">\n    <p></p>\n    <img src=\"./media/icons/notification-exit.svg\" alt=\"hide notification\">\n</div>`\n\n\n\nclass urgentAnnouncement extends HTMLElement {\n\n    constructor() {\n        super()\n\n        this.attachShadow({ mode: 'open' })\n        this.shadowRoot.appendChild(template.content.cloneNode(true))\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n        this.shadowRoot.querySelector('img').addEventListener('click', () => {\n            this.hide()\n            this.store()\n        })\n    }\n\n    static get observedAttributes() {\n        return ['uid']\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue != newValue && newValue != \"\") {\n            const uid = this.getAttribute('uid')\n            const storedHistory = utils.getLocalStorage('read-history')\n            if (storedHistory) {\n                if (!storedHistory.includes(uid)) {\n                    this.updateContent()\n                    this.show()\n                }\n            } else {\n                this.updateContent()\n                this.show()\n            }\n        }\n    }\n\n    updateContent() {\n        this.shadowRoot.querySelector('p').textContent = this.getAttribute('message')\n    }\n\n    show() {\n        this.shadowRoot.querySelector('div').classList.remove('hide')\n        document.querySelector('main').classList.add('showsNotification')\n    }\n\n    hide() {\n        this.shadowRoot.querySelector('div').classList.add('hide')\n        document.querySelector('main').classList.remove('showsNotification')\n    }\n\n    store() {\n        if (utils.storageAvailable('localStorage')) {\n            const storedHistory = utils.getLocalStorage('read-history')\n            const readHistory = storedHistory ? storedHistory : []\n\n            readHistory.push(this.getAttribute('uid'))\n            utils.setLocalStorage('read-history', readHistory)\n        }\n    }\n}\n\nwindow.customElements.define('urgent-announcement', urgentAnnouncement)"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvbW9kdWxlcy9zY2hlZHVsZS5tanMiLCJzcmMvanMvbW9kdWxlcy9zZWFyY2gubWpzIiwic3JjL2pzL21vZHVsZXMvdXRpbHMubWpzIiwic3JjL2pzL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLEVBQS9CLENBQWtDLFdBQWxDLEVBQWIsQyxDQUVBOztBQUNBLElBQU0sUUFBUSxHQUFHLDhCQUFqQixDLENBR0E7O0FBQ0EsNEIsQ0FHQTs7QUFDQSxJQUFNLE1BQU0sR0FBRyxFQUFFLEVBQWpCLEMsQ0FFQTs7QUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosRUFBb0IsSUFBcEIsRSxDQUVBOztBQUNBLE1BQU0sQ0FBQyxFQUFQLENBQVUscUJBQVYsRUFBaUMsVUFBQSxZQUFZLEVBQUk7QUFDN0MsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixxQkFBdkIsQ0FBM0I7O0FBRUEsTUFBSSxLQUFLLENBQUMsTUFBTixDQUFhLENBQUMsa0JBQUQsQ0FBYixDQUFKLEVBQXdDO0FBQ3BDLElBQUEsa0JBQWtCLENBQUMsWUFBbkIsQ0FBZ0MsU0FBaEMsRUFBMkMsWUFBWSxDQUFDLEtBQXhEO0FBQ0EsSUFBQSxrQkFBa0IsQ0FBQyxZQUFuQixDQUFnQyxLQUFoQyxFQUF1QyxZQUFZLENBQUMsVUFBcEQ7QUFDSDtBQUNKLENBUEQsRSxDQVlBOztBQUNBLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCLENBQWpCO0FBQ0EsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGNB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OzJCQUVNO0FBQ0gsV0FBSyxVQUFMLENBQWdCLGFBQWhCLENBQThCLEtBQTlCLEVBQXFDLFNBQXJDLENBQStDLEdBQS9DLENBQW1ELE1BQW5EO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixFQUErQixTQUEvQixDQUF5QyxNQUF6QyxDQUFnRCxtQkFBaEQ7QUFDSDs7OzRCQUVPO0FBQ0osVUFBSSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsY0FBdkIsQ0FBSixFQUE0QztBQUN4QyxZQUFNLGFBQWEsR0FBRyxLQUFLLENBQUMsZUFBTixDQUFzQixjQUF0QixDQUF0QjtBQUNBLFlBQU0sV0FBVyxHQUFHLGFBQWEsR0FBRyxhQUFILEdBQW1CLEVBQXBEO0FBRUEsUUFBQSxXQUFXLENBQUMsSUFBWixDQUFpQixLQUFLLFlBQUwsQ0FBa0IsS0FBbEIsQ0FBakI7QUFDQSxRQUFBLEtBQUssQ0FBQyxlQUFOLENBQXNCLGNBQXRCLEVBQXNDLFdBQXRDO0FBQ0g7QUFDSjs7O3dCQTFDK0I7QUFDNUIsYUFBTyxDQUFDLEtBQUQsQ0FBUDtBQUNIOzs7O2lDQWhCNEIsVzs7QUEyRGpDLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLHFCQUE3QixFQUFvRCxrQkFBcEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL21vZHVsZXMvdXRpbHMubWpzJ1xuaW1wb3J0ICogYXMgc2VhcmNoIGZyb20gJy4vbW9kdWxlcy9zZWFyY2gubWpzJ1xuaW1wb3J0IHNjaGVkdWxlSGFuZGxlciBmcm9tICcuL21vZHVsZXMvc2NoZWR1bGUubWpzJ1xuaW1wb3J0IHVyZ2VudEFubm91bmNlbWVudCBmcm9tICcuL3dlYi1jb21wb25lbnRzL3VyZ2VudC1hbm5vdW5jZW1lbnQubWpzJ1xuXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmlkLnRvTG93ZXJDYXNlKClcblxuLy9pbml0IHdlYi1jb21wb25lbnRzXG5jb25zdCB0ZW1wbGF0ZSA9IHVyZ2VudEFubm91bmNlbWVudFxuXG5cbi8vaW5pdCBkYXNoYm9hcmRcbnNjaGVkdWxlSGFuZGxlcigpXG5cblxuLy91cmdlbnQgYW5ub3VuY2VtZW50c1xuY29uc3Qgc29ja2V0ID0gaW8oKVxuXG4vL3N1YnNjcmliZSB0byB1cmdlbnQtYW5ub3VuY2VtZW50c1xuc29ja2V0LmVtaXQoJ2pvaW4nLCBwYWdlKVxuXG4vL29uIHVyZ2VudC1hbm5vdW5jZW1lbnQgaG9vayB1cGRhdGUgaW50ZXJmYWNlIChzZWUgV0NfdXJnZW50QW5ub3VuY2VtZW50KVxuc29ja2V0Lm9uKCd1cmdlbnQtYW5ub3VuY2VtZW50JywgYW5ub3VuY2VtZW50ID0+IHtcbiAgICBjb25zdCB1cmdlbnRBbm5vdW5jZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd1cmdlbnQtYW5ub3VuY2VtZW50JylcblxuICAgIGlmICh1dGlscy5leGlzdHMoW3VyZ2VudEFubm91bmNlbWVudF0pKSB7XG4gICAgICAgIHVyZ2VudEFubm91bmNlbWVudC5zZXRBdHRyaWJ1dGUoJ21lc3NhZ2UnLCBhbm5vdW5jZW1lbnQudGl0bGUpXG4gICAgICAgIHVyZ2VudEFubm91bmNlbWVudC5zZXRBdHRyaWJ1dGUoJ3VpZCcsIGFubm91bmNlbWVudC5uZXdzSXRlbUlkKVxuICAgIH1cbn0pXG5cblxuXG5cbi8vbWVudSBcbmNvbnN0IG1lbnVJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtaWNvbicpXG5jb25zdCBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKVxuXG5pZiAodXRpbHMuZXhpc3RzKFttZW51SWNvbiwgbWVudV0pKSB7XG5cbiAgICAvL3RvZ2dsZSBtZW51IChvbiBtb2JpbGUpXG4gICAgbWVudUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZScpXG4gICAgfSlcbn1cblxuXG5cblxuLy9zZWFyY2ggXG5jb25zdCBzZWFyY2hCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJhcicpXG5jb25zdCBzZWFyY2hSZXNldEljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc2V0JylcbmNvbnN0IHNlYXJjaEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoLWNvbnRhaW5lciBpbnB1dFt0eXBlPXN1Ym1pdF0nKVxuXG5pZiAodXRpbHMuZXhpc3RzKFtzZWFyY2hCYXIsIHNlYXJjaFJlc2V0SWNvbiwgc2VhcmNoSWNvbl0pKSB7XG5cbiAgICAvL2NvbnRyb2wgc2VhcmNoLXJlc2V0IGljb24gXG4gICAgc2VhcmNoQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gc2VhcmNoLnNob3dSZXNldCgpKVxuICAgIHNlYXJjaEJhci5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gc2VhcmNoLmhpZGVSZXNldCgpKVxuXG5cbiAgICAvL3Jlc2V0IHNlYXJjaCBpbnB1dFxuICAgIHNlYXJjaFJlc2V0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gc2VhcmNoLnJlc2V0KGUpKVxuXG5cbiAgICAvL2RlcGVuZGluZyBvbiBzZWFyY2gtcXVlcnkgZWl0aGVyIGdpdmUgZm9jdXMgdG8gc2VhcmNoYmFyIG9yIHN1Ym1pdCBzZWFyY2gtcXVlcnlcbiAgICBzZWFyY2hJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGlmIChzZWFyY2hCYXIudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHNlYXJjaC5mb2N1cyhlKVxuICAgICAgICB9XG4gICAgfSlcblxuXG4gICAgLy9saXN0ZW4gdG8ga2V5Ym9hcmQgaW5wdXRcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGUgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiL1wiOlxuICAgICAgICAgICAgICAgIHNlYXJjaC5mb2N1cyhlKSAvL2dpdmUgc2VhcmNoYmFyIGZvY3VzIGFuZCBoaWRlIHNlYXJjaC1yZXNldCBpY29uXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH0pXG59IiwiY29uc3Qgc2NoZWR1bGVNYXN0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2NoZWR1bGUnKVxuY29uc3Qgc2NoZWR1bGVDb250YWluZXIgPSBzY2hlZHVsZU1hc3Rlci5xdWVyeVNlbGVjdG9yKCcjc2NoZWR1bGVzLWNvbnRhaW5lcicpXG5jb25zdCBkYXRlRWxlbWVudCA9IHNjaGVkdWxlTWFzdGVyLnF1ZXJ5U2VsZWN0b3IoJyNuYXZpZ2F0b3Igc3BhbicpXG5jb25zdCBwcmV2aW91c1NjaGVkdWxlID0gc2NoZWR1bGVNYXN0ZXIucXVlcnlTZWxlY3RvcignI25hdmlnYXRvciBpbWc6Zmlyc3Qtb2YtdHlwZScpXG5jb25zdCBuZXh0U2NoZWR1bGUgPSBzY2hlZHVsZU1hc3Rlci5xdWVyeVNlbGVjdG9yKCcjbmF2aWdhdG9yIGltZzpsYXN0LW9mLXR5cGUnKVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzY2hlZHVsZUhhbmRsZXIoKSB7XG4gICAgbGV0IHNjaGVkdWxlSW5kZXggPSAwXG4gICAgYXJyb3dIYW5kbGVyKHNjaGVkdWxlSW5kZXgpXG5cbiAgICBwcmV2aW91c1NjaGVkdWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBzY2hlZHVsZUluZGV4LS1cbiAgICAgICAgYXJyb3dIYW5kbGVyKHNjaGVkdWxlSW5kZXgpXG4gICAgICAgIHJlbmRlclNjaGVkdWxlcyhzY2hlZHVsZUluZGV4KVxuICAgIH0pXG5cbiAgICBuZXh0U2NoZWR1bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNjaGVkdWxlSW5kZXgrK1xuICAgICAgICBhcnJvd0hhbmRsZXIoc2NoZWR1bGVJbmRleClcbiAgICAgICAgcmVuZGVyU2NoZWR1bGVzKHNjaGVkdWxlSW5kZXgpXG4gICAgfSlcbn1cblxuXG4vLyBIZWxwZXJzXG5mdW5jdGlvbiByZW5kZXJTY2hlZHVsZXMoc2NoZWR1bGVJbmRleCkge1xuICAgIGdldFNjaGVkdWxlcygpXG4gICAgICAgIC50aGVuKHNjaGVkdWxlcyA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlZHVsZSA9IHNjaGVkdWxlc1tzY2hlZHVsZUluZGV4XVxuICAgICAgICAgICAgY29uc3QgZGl2cyA9IHNjaGVkdWxlLnNjaGVkdWxlcy5tYXAoc2NoZWR1bGUgPT4gY3JlYXRlU2NoZWR1bGVJdGVtKHNjaGVkdWxlKSlcblxuICAgICAgICAgICAgZGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHtzY2hlZHVsZS5kYXl9LSR7c2NoZWR1bGUubW9udGh9LSR7c2NoZWR1bGUueWVhcn1gXG5cbiAgICAgICAgICAgIHNjaGVkdWxlQ29udGFpbmVyLnRleHRDb250ZW50ID0gJydcbiAgICAgICAgICAgIGRpdnMuZm9yRWFjaChkaXYgPT4gc2NoZWR1bGVDb250YWluZXIuYXBwZW5kKGRpdikpXG4gICAgICAgIH0pXG59XG5cbmZ1bmN0aW9uIGFycm93SGFuZGxlcihpbmRleCkge1xuICAgIGluZGV4ID09PSAwID8gcHJldmlvdXNTY2hlZHVsZS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpIDogcHJldmlvdXNTY2hlZHVsZS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpXG4gICAgaW5kZXggPT09IDQgPyBuZXh0U2NoZWR1bGUuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKSA6IG5leHRTY2hlZHVsZS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlSXRlbShzY2hlZHVsZSkge1xuICAgIGNvbnN0IHNjaGVkdWxlX3RpbWUgPSBgJHtzY2hlZHVsZS5zdGFydERhdGVUaW1lLnRpbWV9IC0gJHtzY2hlZHVsZS5lbmREYXRlVGltZS50aW1lfWBcbiAgICBjb25zdCBzY2hlZHVsZV9jb3Vyc2VuYW1lID0gc2NoZWR1bGUuX2xpbmtzLmNvdXJzZXNbMF0udGl0bGVcbiAgICBjb25zdCBzY2hlZHVsZV90ZWFjaGVyID0gc2NoZWR1bGUuX2xpbmtzLmxlY3R1cmVyc1swXS50aXRsZVxuXG4gICAgbGV0IHNjaGVkdWxlX3Jvb21cbiAgICBzY2hlZHVsZS5fZW1iZWRkZWQgPyBzY2hlZHVsZV9yb29tID0gc2NoZWR1bGUuX2VtYmVkZGVkLnJvb21zWzBdLmFiYnJldmlhdGlvbiA6IHNjaGVkdWxlX3Jvb20gPSAnTm8gcm9vbSdcblxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgIGNvbnN0IGNvdXJzZW5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBjb25zdCByb29tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgY29uc3QgdGVhY2hlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuXG4gICAgdGltZS50ZXh0Q29udGVudCA9IHNjaGVkdWxlX3RpbWVcbiAgICBjb3Vyc2VuYW1lLnRleHRDb250ZW50ID0gc2NoZWR1bGVfY291cnNlbmFtZVxuICAgIHJvb20udGV4dENvbnRlbnQgPSBzY2hlZHVsZV9yb29tXG4gICAgdGVhY2hlci50ZXh0Q29udGVudCA9IHNjaGVkdWxlX3RlYWNoZXJcblxuICAgIGRpdi5hcHBlbmQodGltZSlcbiAgICBkaXYuYXBwZW5kKGNvdXJzZW5hbWUpXG4gICAgZGl2LmFwcGVuZChyb29tKVxuICAgIGRpdi5hcHBlbmQodGVhY2hlcilcblxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdzY2hlZHVsZS1jb3Vyc2UnKVxuXG4gICAgcmV0dXJuIGRpdlxufVxuXG5jb25zdCBvcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxufVxuXG4vLyBEYXRhXG5mdW5jdGlvbiBnZXRTY2hlZHVsZXMoKSB7XG4gICAgcmV0dXJuIGZldGNoKCcvc2NoZWR1bGUnLCBvcHRpb25zKVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbn0iLCJjb25zdCBzZWFyY2hCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJhcicpXG5jb25zdCBzZWFyY2hSZXNldEljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc2V0JylcblxuZXhwb3J0IGZ1bmN0aW9uIGZvY3VzKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzZWFyY2hCYXIuZm9jdXMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Jlc2V0KCkge1xuICAgIHNlYXJjaFJlc2V0SWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVSZXNldCgpIHtcbiAgICBpZiAoc2VhcmNoQmFyLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHNlYXJjaFJlc2V0SWNvbi5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldChlKSB7XG4gICAgc2VhcmNoQmFyLnZhbHVlID0gXCJcIlxuICAgIGZvY3VzKGUpXG59IiwiZXhwb3J0IGZ1bmN0aW9uIGV4aXN0cyhbLi4udmFyaWFibGVzXSkge1xuICAgIGNvbnN0IGV4aXN0cyA9IHZhcmlhYmxlcy5ldmVyeSh2YXJpYWJsZSA9PiB2YXJpYWJsZSAhPSBudWxsKVxuICAgIHJldHVybiBleGlzdHNcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9jYWxTdG9yYWdlKG5hbWUsIGl0ZW0pIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCBKU09OLnN0cmluZ2lmeShpdGVtKSlcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9jYWxTdG9yYWdlKGl0ZW0pIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpdGVtKSlcbn1cblxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkgeyAvL3NvdXJjZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9TdG9yYWdlX0FQSS9Vc2luZ190aGVfV2ViX1N0b3JhZ2VfQVBJXG4gICAgbGV0IHN0b3JhZ2VcbiAgICB0cnkge1xuICAgICAgICBzdG9yYWdlID0gd2luZG93W3R5cGVdXG4gICAgICAgIGxldCB4ID0gJ19fc3RvcmFnZV90ZXN0X18nXG4gICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KVxuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICBlLmNvZGUgPT09IDIyIHx8XG4gICAgICAgICAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fFxuICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ05TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEJykgJiZcbiAgICAgICAgICAgIChzdG9yYWdlICYmIHN0b3JhZ2UubGVuZ3RoICE9PSAwKVxuICAgIH1cbn0iLCJpbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi9tb2R1bGVzL3V0aWxzLm1qcydcblxuZXhwb3J0IHsgdGVtcGxhdGUgYXMgV0NfdXJnZW50QW5ub3VuY2VtZW50IH1cblxuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpXG50ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXG48c3R5bGU+XG4gICAgZGl2IHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgNTBweDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA1MHB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUNFN0ZBO1xuICAgIH1cbiAgICBkaXYuaGlkZSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogLTk5OTlweDtcbiAgICB9XG4gICAgcCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAzMHB4O1xuICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgIGp1c3RpZnktc2VsZjogc3RhcnQ7XG4gICAgfVxuICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDI1cHgpIHtcbiAgICAgICAgcCB7XG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW1nIHtcbiAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICAgICAgZ3JpZC1jb2x1bW46IDIgLyAzO1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbjwvc3R5bGU+XG48ZGl2IGNsYXNzPVwiaGlkZVwiPlxuICAgIDxwPjwvcD5cbiAgICA8aW1nIHNyYz1cIi4vbWVkaWEvaWNvbnMvbm90aWZpY2F0aW9uLWV4aXQuc3ZnXCIgYWx0PVwiaGlkZSBub3RpZmljYXRpb25cIj5cbjwvZGl2PmBcblxuXG5cbmNsYXNzIHVyZ2VudEFubm91bmNlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSlcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcigncCcpLnRleHRDb250ZW50ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ21lc3NhZ2UnKVxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignaW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKVxuICAgICAgICAgICAgdGhpcy5zdG9yZSgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbJ3VpZCddXG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAob2xkVmFsdWUgIT0gbmV3VmFsdWUgJiYgbmV3VmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgY29uc3QgdWlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3VpZCcpXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRIaXN0b3J5ID0gdXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCdyZWFkLWhpc3RvcnknKVxuICAgICAgICAgICAgaWYgKHN0b3JlZEhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlZEhpc3RvcnkuaW5jbHVkZXModWlkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3coKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KClcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlQ29udGVudCgpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ3AnKS50ZXh0Q29udGVudCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdtZXNzYWdlJylcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignZGl2JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5jbGFzc0xpc3QuYWRkKCdzaG93c05vdGlmaWNhdGlvbicpXG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvd3NOb3RpZmljYXRpb24nKVxuICAgIH1cblxuICAgIHN0b3JlKCkge1xuICAgICAgICBpZiAodXRpbHMuc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEhpc3RvcnkgPSB1dGlscy5nZXRMb2NhbFN0b3JhZ2UoJ3JlYWQtaGlzdG9yeScpXG4gICAgICAgICAgICBjb25zdCByZWFkSGlzdG9yeSA9IHN0b3JlZEhpc3RvcnkgPyBzdG9yZWRIaXN0b3J5IDogW11cblxuICAgICAgICAgICAgcmVhZEhpc3RvcnkucHVzaCh0aGlzLmdldEF0dHJpYnV0ZSgndWlkJykpXG4gICAgICAgICAgICB1dGlscy5zZXRMb2NhbFN0b3JhZ2UoJ3JlYWQtaGlzdG9yeScsIHJlYWRIaXN0b3J5KVxuICAgICAgICB9XG4gICAgfVxufVxuXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd1cmdlbnQtYW5ub3VuY2VtZW50JywgdXJnZW50QW5ub3VuY2VtZW50KSJdfQ=="}